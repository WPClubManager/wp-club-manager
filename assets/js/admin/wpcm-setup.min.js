!function(a,b,c,d){"use strict";b=void 0!==b&&b.Math==Math?b:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),a.fn.form=function(b){var e,f=a(this),g=f.selector||"",h=(new Date).getTime(),i=[],j=arguments[0],k=arguments[1],l="string"==typeof j,m=[].slice.call(arguments,1);return f.each(function(){var n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G=a(this),H=this,I=[],J=!1;F={initialize:function(){F.get.settings(),l?(E===d&&F.instantiate(),F.invoke(j)):(E!==d&&E.invoke("destroy"),F.verbose("Initializing form validation",G,u),F.bindEvents(),F.set.defaults(),F.instantiate())},instantiate:function(){F.verbose("Storing instance of module",F),E=F,G.data(C,F)},destroy:function(){F.verbose("Destroying previous module",E),F.removeEvents(),G.removeData(C)},refresh:function(){F.verbose("Refreshing selector cache"),n=G.find(x.field),o=G.find(x.group),p=G.find(x.message),q=G.find(x.prompt),r=G.find(x.submit),s=G.find(x.clear),t=G.find(x.reset)},submit:function(){F.verbose("Submitting form",G),G.submit()},attachEvents:function(b,c){c=c||"submit",a(b).on("click"+D,function(a){F[c](),a.preventDefault()})},bindEvents:function(){F.verbose("Attaching form events"),G.on("submit"+D,F.validate.form).on("blur"+D,x.field,F.event.field.blur).on("click"+D,x.submit,F.submit).on("click"+D,x.reset,F.reset).on("click"+D,x.clear,F.clear),u.keyboardShortcuts&&G.on("keydown"+D,x.field,F.event.field.keydown),n.each(function(){var b=a(this),c=b.prop("type"),d=F.get.changeEvent(c,b);a(this).on(d+D,F.event.field.change)})},clear:function(){n.each(function(){var b=a(this),c=b.parent(),d=b.closest(o),e=d.find(x.prompt),f=b.data(w.defaultValue)||"",g=c.is(x.uiCheckbox),h=c.is(x.uiDropdown);d.hasClass(y.error)&&(F.verbose("Resetting error on field",d),d.removeClass(y.error),e.remove()),h?(F.verbose("Resetting dropdown value",c,f),c.dropdown("clear")):g?b.prop("checked",!1):(F.verbose("Resetting field value",b,f),b.val(""))})},reset:function(){n.each(function(){var b=a(this),c=b.parent(),e=b.closest(o),f=e.find(x.prompt),g=b.data(w.defaultValue),h=c.is(x.uiCheckbox),i=c.is(x.uiDropdown),j=e.hasClass(y.error);g!==d&&(j&&(F.verbose("Resetting error on field",e),e.removeClass(y.error),f.remove()),i?(F.verbose("Resetting dropdown value",c,g),c.dropdown("restore defaults")):h?(F.verbose("Resetting checkbox value",c,g),b.prop("checked",g)):(F.verbose("Resetting field value",b,g),b.val(g)))})},determine:{isValid:function(){var b=!0;return a.each(v,function(a,c){F.validate.field(c,a,!0)||(b=!1)}),b}},is:{bracketedRule:function(a){return a.type&&a.type.match(u.regExp.bracket)},shorthandFields:function(a){var b=Object.keys(a),c=a[b[0]];return F.is.shorthandRules(c)},shorthandRules:function(b){return"string"==typeof b||a.isArray(b)},empty:function(a){return!a||0===a.length||(a.is('input[type="checkbox"]')?!a.is(":checked"):F.is.blank(a))},blank:function(b){return""===a.trim(b.val())},valid:function(b){var c=!0;return b?(F.verbose("Checking if field is valid",b),F.validate.field(v[b],b,!1)):(F.verbose("Checking if form is valid"),a.each(v,function(a,b){F.is.valid(a)||(c=!1)}),c)}},removeEvents:function(){G.off(D),n.off(D),r.off(D),n.off(D)},event:{field:{keydown:function(b){var c=a(this),d=b.which,e=c.is(x.input),f=c.is(x.checkbox),g=c.closest(x.uiDropdown).length>0,h={enter:13,escape:27};d==h.escape&&(F.verbose("Escape key pressed blurring field"),c.blur()),b.ctrlKey||d!=h.enter||!e||g||f||(J||(c.one("keyup"+D,F.event.field.keyup),F.submit(),F.debug("Enter pressed on input submitting form")),J=!0)},keyup:function(){J=!1},blur:function(b){var c=a(this),d=c.closest(o),e=F.get.validation(c);d.hasClass(y.error)?(F.debug("Revalidating field",c,e),e&&F.validate.field(e)):"blur"==u.on&&e&&F.validate.field(e)},change:function(b){var c=a(this),d=c.closest(o),e=F.get.validation(c);e&&("change"==u.on||d.hasClass(y.error)&&u.revalidate)&&(clearTimeout(F.timer),F.timer=setTimeout(function(){F.debug("Revalidating field",c,F.get.validation(c)),F.validate.field(e)},u.delay))}}},get:{ancillaryValue:function(a){return!(!a.type||!a.value&&!F.is.bracketedRule(a))&&(a.value!==d?a.value:a.type.match(u.regExp.bracket)[1]+"")},ruleName:function(a){return F.is.bracketedRule(a)?a.type.replace(a.type.match(u.regExp.bracket)[0],""):a.type},changeEvent:function(a,b){return"checkbox"==a||"radio"==a||"hidden"==a||b.is("select")?"change":F.get.inputEvent()},inputEvent:function(){return c.createElement("input").oninput!==d?"input":c.createElement("input").onpropertychange!==d?"propertychange":"keyup"},fieldsFromShorthand:function(b){var c={};return a.each(b,function(b,d){"string"==typeof d&&(d=[d]),c[b]={rules:[]},a.each(d,function(a,d){c[b].rules.push({type:d})})}),c},prompt:function(b,c){var d,e,f=F.get.ruleName(b),g=F.get.ancillaryValue(b),h=F.get.field(c.identifier),i=h.val(),j=a.isFunction(b.prompt)?b.prompt(i):b.prompt||u.prompt[f]||u.text.unspecifiedRule,k=-1!==j.search("{value}"),l=-1!==j.search("{name}");return k&&(j=j.replace("{value}",h.val())),l&&(d=h.closest(x.group).find("label").eq(0),e=1==d.length?d.text():h.prop("placeholder")||u.text.unspecifiedField,j=j.replace("{name}",e)),j=j.replace("{identifier}",c.identifier),j=j.replace("{ruleValue}",g),b.prompt||F.verbose("Using default validation prompt for type",j,f),j},settings:function(){if(a.isPlainObject(b)){var c=Object.keys(b),e=c.length>0&&(b[c[0]].identifier!==d&&b[c[0]].rules!==d);e?(u=a.extend(!0,{},a.fn.form.settings,k),v=a.extend({},a.fn.form.settings.defaults,b),F.error(u.error.oldSyntax,H),F.verbose("Extending settings from legacy parameters",v,u)):(b.fields&&F.is.shorthandFields(b.fields)&&(b.fields=F.get.fieldsFromShorthand(b.fields)),u=a.extend(!0,{},a.fn.form.settings,b),v=a.extend({},a.fn.form.settings.defaults,u.fields),F.verbose("Extending settings",v,u))}else u=a.fn.form.settings,v=a.fn.form.settings.defaults,F.verbose("Using default form validation",v,u);B=u.namespace,w=u.metadata,x=u.selector,y=u.className,z=u.regExp,A=u.error,C="module-"+B,D="."+B,E=G.data(C),F.refresh()},field:function(b){return F.verbose("Finding field with identifier",b),b=F.escape.string(b),n.filter("#"+b).length>0?n.filter("#"+b):n.filter('[name="'+b+'"]').length>0?n.filter('[name="'+b+'"]'):n.filter('[name="'+b+'[]"]').length>0?n.filter('[name="'+b+'[]"]'):n.filter("[data-"+w.validate+'="'+b+'"]').length>0?n.filter("[data-"+w.validate+'="'+b+'"]'):a("<input/>")},fields:function(b){var c=a();return a.each(b,function(a,b){c=c.add(F.get.field(b))}),c},validation:function(b){var c,d;return!!v&&(a.each(v,function(a,e){d=e.identifier||a,F.get.field(d)[0]==b[0]&&(e.identifier=d,c=e)}),c||!1)},value:function(a){var b,c=[];return c.push(a),b=F.get.values.call(H,c),b[a]},values:function(b){var c=a.isArray(b)?F.get.fields(b):n,e={};return c.each(function(b,c){var f=a(c),g=(f.prop("type"),f.prop("name")),h=f.val(),i=f.is(x.checkbox),j=f.is(x.radio),k=-1!==g.indexOf("[]"),l=!!i&&f.is(":checked");g&&(k?(g=g.replace("[]",""),e[g]||(e[g]=[]),i?l?e[g].push(h||!0):e[g].push(!1):e[g].push(h)):j?e[g]!==d&&0!=e[g]||(e[g]=!!l&&(h||!0)):e[g]=i?!!l&&(h||!0):h)}),e}},has:{field:function(a){return F.verbose("Checking for existence of a field with identifier",a),a=F.escape.string(a),"string"!=typeof a&&F.error(A.identifier,a),n.filter("#"+a).length>0||(n.filter('[name="'+a+'"]').length>0||n.filter("[data-"+w.validate+'="'+a+'"]').length>0)}},escape:{string:function(a){return a=String(a),a.replace(z.escape,"\\$&")}},add:{rule:function(a,b){F.add.field(a,b)},field:function(b,c){var d={};F.is.shorthandRules(c)?(c=a.isArray(c)?c:[c],d[b]={rules:[]},a.each(c,function(a,c){d[b].rules.push({type:c})})):d[b]=c,v=a.extend({},v,d),F.debug("Adding rules",d,v)},fields:function(b){var c;c=b&&F.is.shorthandFields(b)?F.get.fieldsFromShorthand(b):b,v=a.extend({},v,c)},prompt:function(b,c){var e=F.get.field(b),f=e.closest(o),g=f.children(x.prompt),h=0!==g.length;c="string"==typeof c?[c]:c,F.verbose("Adding field error state",b),f.addClass(y.error),u.inline&&(h||(g=u.templates.prompt(c),g.appendTo(f)),g.html(c[0]),h?F.verbose("Inline errors are disabled, no inline error added",b):u.transition&&a.fn.transition!==d&&G.transition("is supported")?(F.verbose("Displaying error with css transition",u.transition),g.transition(u.transition+" in",u.duration)):(F.verbose("Displaying error with fallback javascript animation"),g.fadeIn(u.duration)))},errors:function(a){F.debug("Adding form error messages",a),F.set.error(),p.html(u.templates.error(a))}},remove:{rule:function(b,c){var e=a.isArray(c)?c:[c];if(c==d)return F.debug("Removed all rules"),void(v[b].rules=[]);v[b]!=d&&a.isArray(v[b].rules)&&a.each(v[b].rules,function(a,c){-1!==e.indexOf(c.type)&&(F.debug("Removed rule",c.type),v[b].rules.splice(a,1))})},field:function(b){var c=a.isArray(b)?b:[b];a.each(c,function(a,b){F.remove.rule(b)})},rules:function(b,c){a.isArray(b)?a.each(fields,function(a,b){F.remove.rule(b,c)}):F.remove.rule(b,c)},fields:function(a){F.remove.field(a)},prompt:function(b){var c=F.get.field(b),e=c.closest(o),f=e.children(x.prompt);e.removeClass(y.error),u.inline&&f.is(":visible")&&(F.verbose("Removing prompt for field",b),u.transition&&a.fn.transition!==d&&G.transition("is supported")?f.transition(u.transition+" out",u.duration,function(){f.remove()}):f.fadeOut(u.duration,function(){f.remove()}))}},set:{success:function(){G.removeClass(y.error).addClass(y.success)},defaults:function(){n.each(function(){var b=a(this),c=b.filter(x.checkbox).length>0,d=c?b.is(":checked"):b.val();b.data(w.defaultValue,d)})},error:function(){G.removeClass(y.success).addClass(y.error)},value:function(a,b){var c={};return c[a]=b,F.set.values.call(H,c)},values:function(b){a.isEmptyObject(b)||a.each(b,function(b,c){var d,e=F.get.field(b),f=e.parent(),g=a.isArray(c),h=f.is(x.uiCheckbox),i=f.is(x.uiDropdown),j=e.is(x.radio)&&h,k=e.length>0;k&&(g&&h?(F.verbose("Selecting multiple",c,e),f.checkbox("uncheck"),a.each(c,function(a,b){d=e.filter('[value="'+b+'"]'),f=d.parent(),d.length>0&&f.checkbox("check")})):j?(F.verbose("Selecting radio value",c,e),e.filter('[value="'+c+'"]').parent(x.uiCheckbox).checkbox("check")):h?(F.verbose("Setting checkbox value",c,f),!0===c?f.checkbox("check"):f.checkbox("uncheck")):i?(F.verbose("Setting dropdown value",c,f),f.dropdown("set selected",c)):(F.verbose("Setting field value",c,e),e.val(c)))})}},validate:{form:function(a,b){var c=F.get.values();if(J)return!1;if(I=[],F.determine.isValid()){if(F.debug("Form has no validation errors, submitting"),F.set.success(),!0!==b)return u.onSuccess.call(H,a,c)}else if(F.debug("Form has errors"),F.set.error(),u.inline||F.add.errors(I),G.data("moduleApi")!==d&&a.stopImmediatePropagation(),!0!==b)return u.onFailure.call(H,I,c)},field:function(b,c,e){e=e===d||e,"string"==typeof b&&(F.verbose("Validating field",b),c=b,b=v[b]);var f=b.identifier||c,g=F.get.field(f),h=!!b.depends&&F.get.field(b.depends),i=!0,j=[];return b.identifier||(F.debug("Using field name as identifier",f),b.identifier=f),g.prop("disabled")?(F.debug("Field is disabled. Skipping",f),i=!0):b.optional&&F.is.blank(g)?(F.debug("Field is optional and blank. Skipping",f),i=!0):b.depends&&F.is.empty(h)?(F.debug("Field depends on another value that is not present or empty. Skipping",h),i=!0):b.rules!==d&&a.each(b.rules,function(a,c){F.has.field(f)&&!F.validate.rule(b,c)&&(F.debug("Field is invalid",f,c.type),j.push(F.get.prompt(c,b)),i=!1)}),i?(e&&(F.remove.prompt(f,j),u.onValid.call(g)),!0):(e&&(I=I.concat(j),F.add.prompt(f,j),u.onInvalid.call(g,j)),!1)},rule:function(b,c){var e=F.get.field(b.identifier),f=(c.type,e.val()),g=F.get.ancillaryValue(c),h=F.get.ruleName(c),i=u.rules[h];return a.isFunction(i)?(f=f===d||""===f||null===f?"":a.trim(f+""),i.call(e,f,g)):void F.error(A.noRule,h)}},setting:function(b,c){if(a.isPlainObject(b))a.extend(!0,u,b);else{if(c===d)return u[b];u[b]=c}},internal:function(b,c){if(a.isPlainObject(b))a.extend(!0,F,b);else{if(c===d)return F[b];F[b]=c}},debug:function(){!u.silent&&u.debug&&(u.performance?F.performance.log(arguments):(F.debug=Function.prototype.bind.call(console.info,console,u.name+":"),F.debug.apply(console,arguments)))},verbose:function(){!u.silent&&u.verbose&&u.debug&&(u.performance?F.performance.log(arguments):(F.verbose=Function.prototype.bind.call(console.info,console,u.name+":"),F.verbose.apply(console,arguments)))},error:function(){u.silent||(F.error=Function.prototype.bind.call(console.error,console,u.name+":"),F.error.apply(console,arguments))},performance:{log:function(a){var b,c,d;u.performance&&(b=(new Date).getTime(),d=h||b,c=b-d,h=b,i.push({Name:a[0],Arguments:[].slice.call(a,1)||"",Element:H,"Execution Time":c})),clearTimeout(F.performance.timer),F.performance.timer=setTimeout(F.performance.display,500)},display:function(){var b=u.name+":",c=0;h=!1,clearTimeout(F.performance.timer),a.each(i,function(a,b){c+=b["Execution Time"]}),b+=" "+c+"ms",g&&(b+=" '"+g+"'"),f.length>1&&(b+=" ("+f.length+")"),(console.group!==d||console.table!==d)&&i.length>0&&(console.groupCollapsed(b),console.table?console.table(i):a.each(i,function(a,b){console.log(b.Name+": "+b["Execution Time"]+"ms")}),console.groupEnd()),i=[]}},invoke:function(b,c,f){var g,h,i,j=E;return c=c||m,f=H||f,"string"==typeof b&&j!==d&&(b=b.split(/[\. ]/),g=b.length-1,a.each(b,function(c,e){var f=c!=g?e+b[c+1].charAt(0).toUpperCase()+b[c+1].slice(1):b;if(a.isPlainObject(j[f])&&c!=g)j=j[f];else{if(j[f]!==d)return h=j[f],!1;if(!a.isPlainObject(j[e])||c==g)return j[e]!==d&&(h=j[e],!1);j=j[e]}})),a.isFunction(h)?i=h.apply(f,c):h!==d&&(i=h),a.isArray(e)?e.push(i):e!==d?e=[e,i]:i!==d&&(e=i),h}},F.initialize()}),e!==d?e:this},a.fn.form.settings={name:"Form",namespace:"form",debug:!1,verbose:!1,performance:!0,fields:!1,keyboardShortcuts:!0,on:"submit",inline:!1,delay:200,revalidate:!0,transition:"scale",duration:200,onValid:function(){},onInvalid:function(){},onSuccess:function(){return!0},onFailure:function(){return!1},metadata:{defaultValue:"default",validate:"validate"},regExp:{htmlID:/^[a-zA-Z][\w:.-]*$/g,bracket:/\[(.*)\]/i,decimal:/^\d+\.?\d*$/,email:/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,escape:/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,flags:/^\/(.*)\/(.*)?/,integer:/^\-?\d+$/,number:/^\-?\d*(\.\d+)?$/,url:/(https?:\/\/(?:www\.|(?!www))[^\s\.]+\.[^\s]{2,}|www\.[^\s]+\.[^\s]{2,})/i},text:{unspecifiedRule:"Please enter a valid value",unspecifiedField:"This field"},prompt:{empty:"{name} must have a value",checked:"{name} must be checked",email:"{name} must be a valid e-mail",url:"{name} must be a valid url",regExp:"{name} is not formatted correctly",integer:"{name} must be an integer",decimal:"{name} must be a decimal number",number:"{name} must be set to a number",is:'{name} must be "{ruleValue}"',isExactly:'{name} must be exactly "{ruleValue}"',not:'{name} cannot be set to "{ruleValue}"',notExactly:'{name} cannot be set to exactly "{ruleValue}"',contain:'{name} must contain "{ruleValue}"',containExactly:'{name} must contain exactly "{ruleValue}"',doesntContain:'{name} cannot contain  "{ruleValue}"',doesntContainExactly:'{name} cannot contain exactly "{ruleValue}"',minLength:"{name} must be at least {ruleValue} characters",length:"{name} must be at least {ruleValue} characters",exactLength:"{name} must be exactly {ruleValue} characters",maxLength:"{name} cannot be longer than {ruleValue} characters",match:"{name} must match {ruleValue} field",different:"{name} must have a different value than {ruleValue} field",creditCard:"{name} must be a valid credit card number",minCount:"{name} must have at least {ruleValue} choices",exactCount:"{name} must have exactly {ruleValue} choices",maxCount:"{name} must have {ruleValue} or less choices"},selector:{checkbox:'input[type="checkbox"], input[type="radio"]',clear:".clear",field:"input, textarea, select",group:".field",input:"input",message:".error.message",prompt:".prompt.label",radio:'input[type="radio"]',reset:'.reset:not([type="reset"])',submit:'.submit:not([type="submit"])',uiCheckbox:".ui.checkbox",uiDropdown:".ui.dropdown"},className:{error:"error",label:"ui prompt label",pressed:"down",success:"success"},error:{identifier:"You must specify a string identifier for each field",method:"The method you called is not defined.",noRule:"There is no rule matching the one you specified",oldSyntax:"Starting in 2.0 forms now only take a single settings object. Validation settings converted to new syntax automatically."},templates:{error:function(b){var c='<ul class="list">';return a.each(b,function(a,b){c+="<li>"+b+"</li>"}),c+="</ul>",a(c)},prompt:function(b){return a("<div/>").addClass("ui basic red pointing prompt label").html(b[0])}},rules:{empty:function(b){return!(b===d||""===b||a.isArray(b)&&0===b.length)},checked:function(){return a(this).filter(":checked").length>0},email:function(b){return a.fn.form.settings.regExp.email.test(b)},url:function(b){return a.fn.form.settings.regExp.url.test(b)},regExp:function(b,c){if(c instanceof RegExp)return b.match(c);var d,e=c.match(a.fn.form.settings.regExp.flags);return e&&(c=e.length>=2?e[1]:c,d=e.length>=3?e[2]:""),b.match(new RegExp(c,d))},integer:function(b,c){var e,f,g,h=a.fn.form.settings.regExp.integer;return c&&-1===["",".."].indexOf(c)&&(-1==c.indexOf("..")?h.test(c)&&(e=f=c-0):(g=c.split("..",2),h.test(g[0])&&(e=g[0]-0),h.test(g[1])&&(f=g[1]-0))),h.test(b)&&(e===d||b>=e)&&(f===d||b<=f)},decimal:function(b){return a.fn.form.settings.regExp.decimal.test(b)},number:function(b){return a.fn.form.settings.regExp.number.test(b)},is:function(a,b){return b="string"==typeof b?b.toLowerCase():b,(a="string"==typeof a?a.toLowerCase():a)==b},isExactly:function(a,b){return a==b},not:function(a,b){return a="string"==typeof a?a.toLowerCase():a,b="string"==typeof b?b.toLowerCase():b,a!=b},notExactly:function(a,b){return a!=b},contains:function(b,c){return c=c.replace(a.fn.form.settings.regExp.escape,"\\$&"),-1!==b.search(new RegExp(c,"i"))},containsExactly:function(b,c){return c=c.replace(a.fn.form.settings.regExp.escape,"\\$&"),-1!==b.search(new RegExp(c))},doesntContain:function(b,c){return c=c.replace(a.fn.form.settings.regExp.escape,"\\$&"),-1===b.search(new RegExp(c,"i"))},doesntContainExactly:function(b,c){return c=c.replace(a.fn.form.settings.regExp.escape,"\\$&"),-1===b.search(new RegExp(c))},minLength:function(a,b){return a!==d&&a.length>=b},length:function(a,b){return a!==d&&a.length>=b},exactLength:function(a,b){return a!==d&&a.length==b},maxLength:function(a,b){return a!==d&&a.length<=b},match:function(b,c){var e;a(this);return a('[data-validate="'+c+'"]').length>0?e=a('[data-validate="'+c+'"]').val():a("#"+c).length>0?e=a("#"+c).val():a('[name="'+c+'"]').length>0?e=a('[name="'+c+'"]').val():a('[name="'+c+'[]"]').length>0&&(e=a('[name="'+c+'[]"]')),e!==d&&b.toString()==e.toString()},different:function(b,c){var e;a(this);return a('[data-validate="'+c+'"]').length>0?e=a('[data-validate="'+c+'"]').val():a("#"+c).length>0?e=a("#"+c).val():a('[name="'+c+'"]').length>0?e=a('[name="'+c+'"]').val():a('[name="'+c+'[]"]').length>0&&(e=a('[name="'+c+'[]"]')),e!==d&&b.toString()!==e.toString()},creditCard:function(b,c){var d,e,f={visa:{pattern:/^4/,length:[16]},amex:{pattern:/^3[47]/,length:[15]},mastercard:{pattern:/^5[1-5]/,length:[16]},discover:{pattern:/^(6011|622(12[6-9]|1[3-9][0-9]|[2-8][0-9]{2}|9[0-1][0-9]|92[0-5]|64[4-9])|65)/,length:[16]},unionPay:{pattern:/^(62|88)/,length:[16,17,18,19]},jcb:{pattern:/^35(2[89]|[3-8][0-9])/,length:[16]},maestro:{pattern:/^(5018|5020|5038|6304|6759|676[1-3])/,length:[12,13,14,15,16,17,18,19]},dinersClub:{pattern:/^(30[0-5]|^36)/,length:[14]},laser:{pattern:/^(6304|670[69]|6771)/,length:[16,17,18,19]},visaElectron:{pattern:/^(4026|417500|4508|4844|491(3|7))/,length:[16]}},g={},h=!1,i="string"==typeof c&&c.split(",");if("string"==typeof b&&0!==b.length){if(b=b.replace(/[\-]/g,""),i&&(a.each(i,function(c,d){(e=f[d])&&(g={length:-1!==a.inArray(b.length,e.length),pattern:-1!==b.search(e.pattern)},g.length&&g.pattern&&(h=!0))}),!h))return!1;if(d={number:-1!==a.inArray(b.length,f.unionPay.length),pattern:-1!==b.search(f.unionPay.pattern)},d.number&&d.pattern)return!0;for(var j=b.length,k=0,l=[[0,1,2,3,4,5,6,7,8,9],[0,2,4,6,8,1,3,5,7,9]],m=0;j--;)m+=l[k][parseInt(b.charAt(j),10)],k^=1;return m%10==0&&m>0}},minCount:function(a,b){return 0==b||(1==b?""!==a:a.split(",").length>=b)},exactCount:function(a,b){return 0==b?""===a:1==b?""!==a&&-1===a.search(","):a.split(",").length==b},maxCount:function(a,b){return 0!=b&&(1==b?-1===a.search(","):a.split(",").length<=b)}}},b=void 0!==b&&b.Math==Math?b:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),a.fn.dropdown=function(e){var f,g=a(this),h=a(c),i=g.selector||"",j="ontouchstart"in c.documentElement,k=(new Date).getTime(),l=[],m=arguments[0],n="string"==typeof m,o=[].slice.call(arguments,1);return g.each(function(p){var q,r,s,t,u,v,w,x,y=a.isPlainObject(e)?a.extend(!0,{},a.fn.dropdown.settings,e):a.extend({},a.fn.dropdown.settings),z=y.className,A=y.message,B=y.fields,C=y.keys,D=y.metadata,E=y.namespace,F=y.regExp,G=y.selector,H=y.error,I=y.templates,J="."+E,K="module-"+E,L=a(this),M=a(y.context),N=L.find(G.text),O=L.find(G.search),P=L.find(G.sizer),Q=L.find(G.input),R=L.find(G.icon),S=L.prev().find(G.text).length>0?L.prev().find(G.text):L.prev(),T=L.children(G.menu),U=T.find(G.item),V=!1,W=!1,X=!1,Y=this,Z=L.data(K);x={initialize:function(){x.debug("Initializing dropdown",y),x.is.alreadySetup()?x.setup.reference():(x.setup.layout(),y.values&&x.change.values(y.values),x.refreshData(),x.save.defaults(),x.restore.selected(),x.create.id(),x.bind.events(),x.observeChanges(),x.instantiate())},instantiate:function(){x.verbose("Storing instance of dropdown",x),Z=x,L.data(K,x)},destroy:function(){x.verbose("Destroying previous dropdown",L),x.remove.tabbable(),L.off(J).removeData(K),T.off(J),h.off(t),x.disconnect.menuObserver(),x.disconnect.selectObserver()},observeChanges:function(){"MutationObserver"in b&&(v=new MutationObserver(x.event.select.mutation),w=new MutationObserver(x.event.menu.mutation),x.debug("Setting up mutation observer",v,w),x.observe.select(),x.observe.menu())},disconnect:{menuObserver:function(){w&&w.disconnect()},selectObserver:function(){v&&v.disconnect()}},observe:{select:function(){x.has.input()&&v.observe(L[0],{childList:!0,subtree:!0})},menu:function(){x.has.menu()&&w.observe(T[0],{childList:!0,subtree:!0})}},create:{id:function(){u=(Math.random().toString(16)+"000000000").substr(2,8),t="."+u,x.verbose("Creating unique id for element",u)},userChoice:function(b){var c,e,f;return!!(b=b||x.get.userValues())&&(b=a.isArray(b)?b:[b],a.each(b,function(b,g){!1===x.get.item(g)&&(f=y.templates.addition(x.add.variables(A.addResult,g)),e=a("<div />").html(f).attr("data-"+D.value,g).attr("data-"+D.text,g).addClass(z.addition).addClass(z.item),y.hideAdditions&&e.addClass(z.hidden),c=c===d?e:c.add(e),x.verbose("Creating user choices for value",g,e))}),c)},userLabels:function(b){var c=x.get.userValues();c&&(x.debug("Adding user labels",c),a.each(c,function(a,b){x.verbose("Adding custom user value"),x.add.label(b,b)}))},menu:function(){T=a("<div />").addClass(z.menu).appendTo(L)},sizer:function(){P=a("<span />").addClass(z.sizer).insertAfter(O)}},search:function(a){a=a!==d?a:x.get.query(),x.verbose("Searching for query",a),x.has.minCharacters(a)?x.filter(a):x.hide()},select:{firstUnfiltered:function(){x.verbose("Selecting first non-filtered element"),x.remove.selectedItem(),U.not(G.unselectable).not(G.addition+G.hidden).eq(0).addClass(z.selected)},nextAvailable:function(a){a=a.eq(0);var b=a.nextAll(G.item).not(G.unselectable).eq(0),c=a.prevAll(G.item).not(G.unselectable).eq(0);b.length>0?(x.verbose("Moving selection to",b),b.addClass(z.selected)):(x.verbose("Moving selection to",c),c.addClass(z.selected))}},setup:{api:function(){var a={debug:y.debug,urlData:{value:x.get.value(),query:x.get.query()},on:!1};x.verbose("First request, initializing API"),L.api(a)},layout:function(){L.is("select")&&(x.setup.select(),x.setup.returnedObject()),x.has.menu()||x.create.menu(),x.is.search()&&!x.has.search()&&(x.verbose("Adding search input"),O=a("<input />").addClass(z.search).prop("autocomplete","off").insertBefore(N)),x.is.multiple()&&x.is.searchSelection()&&!x.has.sizer()&&x.create.sizer(),y.allowTab&&x.set.tabbable()},select:function(){var b=x.get.selectValues();x.debug("Dropdown initialized on a select",b),L.is("select")&&(Q=L),Q.parent(G.dropdown).length>0?(x.debug("UI dropdown already exists. Creating dropdown menu only"),L=Q.closest(G.dropdown),x.has.menu()||x.create.menu(),T=L.children(G.menu),x.setup.menu(b)):(x.debug("Creating entire dropdown from select"),L=a("<div />").attr("class",Q.attr("class")).addClass(z.selection).addClass(z.dropdown).html(I.dropdown(b)).insertBefore(Q),Q.hasClass(z.multiple)&&!1===Q.prop("multiple")&&(x.error(H.missingMultiple),Q.prop("multiple",!0)),Q.is("[multiple]")&&x.set.multiple(),Q.prop("disabled")&&(x.debug("Disabling dropdown"),L.addClass(z.disabled)),Q.removeAttr("class").detach().prependTo(L)),x.refresh()},menu:function(a){T.html(I.menu(a,B)),U=T.find(G.item)},reference:function(){x.debug("Dropdown behavior was called on select, replacing with closest dropdown"),L=L.parent(G.dropdown),Z=L.data(K),Y=L.get(0),x.refresh(),x.setup.returnedObject()},returnedObject:function(){var a=g.slice(0,p),b=g.slice(p+1);g=a.add(L).add(b)}},refresh:function(){x.refreshSelectors(),x.refreshData()},refreshItems:function(){U=T.find(G.item)},refreshSelectors:function(){x.verbose("Refreshing selector cache"),N=L.find(G.text),O=L.find(G.search),Q=L.find(G.input),R=L.find(G.icon),S=L.prev().find(G.text).length>0?L.prev().find(G.text):L.prev(),T=L.children(G.menu),U=T.find(G.item)},refreshData:function(){x.verbose("Refreshing cached metadata"),U.removeData(D.text).removeData(D.value)},clearData:function(){x.verbose("Clearing metadata"),U.removeData(D.text).removeData(D.value),L.removeData(D.defaultText).removeData(D.defaultValue).removeData(D.placeholderText)},toggle:function(){x.verbose("Toggling menu visibility"),x.is.active()?x.hide():x.show()},show:function(b){if(b=a.isFunction(b)?b:function(){},!x.can.show()&&x.is.remote()&&(x.debug("No API results retrieved, searching before show"),x.queryRemote(x.get.query(),x.show)),x.can.show()&&!x.is.active()){if(x.debug("Showing dropdown"),!x.has.message()||x.has.maxSelections()||x.has.allResultsFiltered()||x.remove.message(),x.is.allFiltered())return!0;!1!==y.onShow.call(Y)&&x.animate.show(function(){x.can.click()&&x.bind.intent(),x.has.menuSearch()&&x.focusSearch(),x.set.visible(),b.call(Y)})}},hide:function(b){b=a.isFunction(b)?b:function(){},x.is.active()&&!x.is.animatingOutward()&&(x.debug("Hiding dropdown"),!1!==y.onHide.call(Y)&&x.animate.hide(function(){x.remove.visible(),b.call(Y)}))},hideOthers:function(){x.verbose("Finding other dropdowns to hide"),g.not(L).has(G.menu+"."+z.visible).dropdown("hide")},hideMenu:function(){x.verbose("Hiding menu  instantaneously"),x.remove.active(),x.remove.visible(),T.transition("hide")},hideSubMenus:function(){var a=T.children(G.item).find(G.menu);x.verbose("Hiding sub menus",a),a.transition("hide")},bind:{events:function(){j&&x.bind.touchEvents(),x.bind.keyboardEvents(),x.bind.inputEvents(),x.bind.mouseEvents()},touchEvents:function(){x.debug("Touch device detected binding additional touch events"),x.is.searchSelection()||x.is.single()&&L.on("touchstart"+J,x.event.test.toggle),T.on("touchstart"+J,G.item,x.event.item.mouseenter)},keyboardEvents:function(){x.verbose("Binding keyboard events"),L.on("keydown"+J,x.event.keydown),x.has.search()&&L.on(x.get.inputEvent()+J,G.search,x.event.input),x.is.multiple()&&h.on("keydown"+t,x.event.document.keydown)},inputEvents:function(){x.verbose("Binding input change events"),L.on("change"+J,G.input,x.event.change)},mouseEvents:function(){x.verbose("Binding mouse events"),x.is.multiple()&&L.on("click"+J,G.label,x.event.label.click).on("click"+J,G.remove,x.event.remove.click),x.is.searchSelection()?(L.on("mousedown"+J,x.event.mousedown).on("mouseup"+J,x.event.mouseup).on("mousedown"+J,G.menu,x.event.menu.mousedown).on("mouseup"+J,G.menu,x.event.menu.mouseup).on("click"+J,G.icon,x.event.icon.click).on("focus"+J,G.search,x.event.search.focus).on("click"+J,G.search,x.event.search.focus).on("blur"+J,G.search,x.event.search.blur).on("click"+J,G.text,x.event.text.focus),x.is.multiple()&&L.on("click"+J,x.event.click)):("click"==y.on?L.on("click"+J,x.event.test.toggle):"hover"==y.on?L.on("mouseenter"+J,x.delay.show).on("mouseleave"+J,x.delay.hide):L.on(y.on+J,x.toggle),L.on("click"+J,G.icon,x.event.icon.click).on("mousedown"+J,x.event.mousedown).on("mouseup"+J,x.event.mouseup).on("focus"+J,x.event.focus),x.has.menuSearch()?L.on("blur"+J,G.search,x.event.search.blur):L.on("blur"+J,x.event.blur)),T.on("mouseenter"+J,G.item,x.event.item.mouseenter).on("mouseleave"+J,G.item,x.event.item.mouseleave).on("click"+J,G.item,x.event.item.click)},intent:function(){x.verbose("Binding hide intent event to document"),j&&h.on("touchstart"+t,x.event.test.touch).on("touchmove"+t,x.event.test.touch),h.on("click"+t,x.event.test.hide)}},unbind:{intent:function(){x.verbose("Removing hide intent event from document"),j&&h.off("touchstart"+t).off("touchmove"+t),h.off("click"+t)}},filter:function(a){var b=a!==d?a:x.get.query(),c=function(){x.is.multiple()&&x.filterActive(),(a||!a&&0==x.get.activeItem().length)&&x.select.firstUnfiltered(),x.has.allResultsFiltered()?y.onNoResults.call(Y,b)?y.allowAdditions?y.hideAdditions&&(x.verbose("User addition with no menu, setting empty style"),x.set.empty(),x.hideMenu()):(x.verbose("All items filtered, showing message",b),x.add.message(A.noResults)):(x.verbose("All items filtered, hiding dropdown",b),x.hideMenu()):(x.remove.empty(),x.remove.message()),y.allowAdditions&&x.add.userSuggestion(a),x.is.searchSelection()&&x.can.show()&&x.is.focusedOnSearch()&&x.show()};y.useLabels&&x.has.maxSelections()||(y.apiSettings?x.can.useAPI()?x.queryRemote(b,function(){y.filterRemoteData&&x.filterItems(b),c()}):x.error(H.noAPI):(x.filterItems(b),c()))},queryRemote:function(b,c){var d={errorDuration:!1,cache:"local",throttle:y.throttle,urlData:{query:b},onError:function(){x.add.message(A.serverError),c()},onFailure:function(){x.add.message(A.serverError),c()},onSuccess:function(b){var d=b[B.remoteValues];a.isArray(d)&&d.length>0?(x.remove.message(),x.setup.menu({values:b[B.remoteValues]})):x.add.message(A.noResults),c()}};L.api("get request")||x.setup.api(),d=a.extend(!0,{},d,y.apiSettings),L.api("setting",d).api("query")},filterItems:function(b){var c=b!==d?b:x.get.query(),e=null,f=x.escape.string(c),g=new RegExp("^"+f,"igm");x.has.query()&&(e=[],x.verbose("Searching for matching values",c),U.each(function(){var b,d,f=a(this);if("both"==y.match||"text"==y.match){if(b=String(x.get.choiceText(f,!1)),-1!==b.search(g))return e.push(this),!0;if("exact"===y.fullTextSearch&&x.exactSearch(c,b))return e.push(this),!0;if(!0===y.fullTextSearch&&x.fuzzySearch(c,b))return e.push(this),!0}if("both"==y.match||"value"==y.match){if(d=String(x.get.choiceValue(f,b)),-1!==d.search(g))return e.push(this),!0;if("exact"===y.fullTextSearch&&x.exactSearch(c,d))return e.push(this),!0;if(!0===y.fullTextSearch&&x.fuzzySearch(c,d))return e.push(this),!0}})),x.debug("Showing only matched items",c),x.remove.filteredItem(),e&&U.not(e).addClass(z.filtered)},fuzzySearch:function(a,b){var c=b.length,d=a.length;if(a=a.toLowerCase(),b=b.toLowerCase(),d>c)return!1;if(d===c)return a===b;a:for(var e=0,f=0;e<d;e++){for(var g=a.charCodeAt(e);f<c;)if(b.charCodeAt(f++)===g)continue a;return!1}return!0},exactSearch:function(a,b){return a=a.toLowerCase(),b=b.toLowerCase(),b.indexOf(a)>-1},filterActive:function(){y.useLabels&&U.filter("."+z.active).addClass(z.filtered)},focusSearch:function(a){x.has.search()&&!x.is.focusedOnSearch()&&(a?(L.off("focus"+J,G.search),O.focus(),L.on("focus"+J,G.search,x.event.search.focus)):O.focus())},forceSelection:function(){
var a=U.not(z.filtered).filter("."+z.selected).eq(0),b=U.not(z.filtered).filter("."+z.active).eq(0),c=a.length>0?a:b;if(c.length>0&&!x.is.multiple())return x.debug("Forcing partial selection to selected item",c),void x.event.item.click.call(c,{},!0);y.allowAdditions?(x.set.selected(x.get.query()),x.remove.searchTerm()):x.remove.searchTerm()},change:{values:function(b){y.allowAdditions||x.clear(),x.debug("Creating dropdown with specified values",b),x.setup.menu({values:b}),a.each(b,function(a,b){if(1==b.selected)return x.debug("Setting initial selection to",b.value),x.set.selected(b.value),!0})}},event:{change:function(){X||(x.debug("Input changed, updating selection"),x.set.selected())},focus:function(){y.showOnFocus&&!V&&x.is.hidden()&&!r&&x.show()},blur:function(a){r=c.activeElement===this,V||r||(x.remove.activeLabel(),x.hide())},mousedown:function(){x.is.searchSelection()?s=!0:V=!0},mouseup:function(){x.is.searchSelection()?s=!1:V=!1},click:function(b){a(b.target).is(L)&&(x.is.focusedOnSearch()?x.show():x.focusSearch())},search:{focus:function(){V=!0,x.is.multiple()&&x.remove.activeLabel(),y.showOnFocus&&x.search()},blur:function(a){r=c.activeElement===this,x.is.searchSelection()&&!s&&(W||r||(y.forceSelection&&x.forceSelection(),x.hide())),s=!1}},icon:{click:function(a){R.hasClass(z.clear)?x.clear():x.can.click()&&x.toggle()}},text:{focus:function(a){V=!0,x.focusSearch()}},input:function(a){(x.is.multiple()||x.is.searchSelection())&&x.set.filtered(),clearTimeout(x.timer),x.timer=setTimeout(x.search,y.delay.search)},label:{click:function(b){var c=a(this),d=L.find(G.label),e=d.filter("."+z.active),f=c.nextAll("."+z.active),g=c.prevAll("."+z.active),h=f.length>0?c.nextUntil(f).add(e).add(c):c.prevUntil(g).add(e).add(c);b.shiftKey?(e.removeClass(z.active),h.addClass(z.active)):b.ctrlKey?c.toggleClass(z.active):(e.removeClass(z.active),c.addClass(z.active)),y.onLabelSelect.apply(this,d.filter("."+z.active))}},remove:{click:function(){var b=a(this).parent();b.hasClass(z.active)?x.remove.activeLabels():x.remove.activeLabels(b)}},test:{toggle:function(a){var b=x.is.multiple()?x.show:x.toggle;x.is.bubbledLabelClick(a)||x.is.bubbledIconClick(a)||x.determine.eventOnElement(a,b)&&a.preventDefault()},touch:function(a){x.determine.eventOnElement(a,function(){"touchstart"==a.type?x.timer=setTimeout(function(){x.hide()},y.delay.touch):"touchmove"==a.type&&clearTimeout(x.timer)}),a.stopPropagation()},hide:function(a){x.determine.eventInModule(a,x.hide)}},select:{mutation:function(b){x.debug("<select> modified, recreating menu");var c=!1;a.each(b,function(b,d){if(a(d.target).is("select")||a(d.addedNodes).is("select"))return c=!0,!0}),c&&(x.disconnect.selectObserver(),x.refresh(),x.setup.select(),x.set.selected(),x.observe.select())}},menu:{mutation:function(b){var c=b[0],d=a(c.addedNodes?c.addedNodes[0]:!1),e=a(c.removedNodes?c.removedNodes[0]:!1),f=d.add(e),g=f.is(G.addition)||f.closest(G.addition).length>0,h=f.is(G.message)||f.closest(G.message).length>0;g||h?(x.debug("Updating item selector cache"),x.refreshItems()):(x.debug("Menu modified, updating selector cache"),x.refresh())},mousedown:function(){W=!0},mouseup:function(){W=!1}},item:{mouseenter:function(b){var c=a(b.target),d=a(this),e=d.children(G.menu),f=d.siblings(G.item).children(G.menu),g=e.length>0;!(e.find(c).length>0)&&g&&(clearTimeout(x.itemTimer),x.itemTimer=setTimeout(function(){x.verbose("Showing sub-menu",e),a.each(f,function(){x.animate.hide(!1,a(this))}),x.animate.show(!1,e)},y.delay.show),b.preventDefault())},mouseleave:function(b){var c=a(this).children(G.menu);c.length>0&&(clearTimeout(x.itemTimer),x.itemTimer=setTimeout(function(){x.verbose("Hiding sub-menu",c),x.animate.hide(!1,c)},y.delay.hide))},click:function(b,d){var e=a(this),f=a(b?b.target:""),g=e.find(G.menu),h=x.get.choiceText(e),i=x.get.choiceValue(e,h),j=g.length>0,k=g.find(f).length>0;x.has.menuSearch()&&a(c.activeElement).blur(),k||j&&!y.allowCategorySelection||(x.is.searchSelection()&&(y.allowAdditions&&x.remove.userAddition(),x.remove.searchTerm(),x.is.focusedOnSearch()||1==d||x.focusSearch(!0)),y.useLabels||(x.remove.filteredItem(),x.set.scrollPosition(e)),x.determine.selectAction.call(this,h,i))}},document:{keydown:function(a){var b=a.which;if(x.is.inObject(b,C)){var c=L.find(G.label),d=c.filter("."+z.active),e=(d.data(D.value),c.index(d)),f=c.length,g=d.length>0,h=d.length>1,i=0===e,j=e+1==f,k=x.is.searchSelection(),l=x.is.focusedOnSearch(),m=x.is.focused(),n=l&&0===x.get.caretPosition();if(k&&!g&&!l)return;b==C.leftArrow?!m&&!n||g?g&&(a.shiftKey?x.verbose("Adding previous label to selection"):(x.verbose("Selecting previous label"),c.removeClass(z.active)),i&&!h?d.addClass(z.active):d.prev(G.siblingLabel).addClass(z.active).end(),a.preventDefault()):(x.verbose("Selecting previous label"),c.last().addClass(z.active)):b==C.rightArrow?(m&&!g&&c.first().addClass(z.active),g&&(a.shiftKey?x.verbose("Adding next label to selection"):(x.verbose("Selecting next label"),c.removeClass(z.active)),j?k?l?c.removeClass(z.active):x.focusSearch():h?d.next(G.siblingLabel).addClass(z.active):d.addClass(z.active):d.next(G.siblingLabel).addClass(z.active),a.preventDefault())):b==C.deleteKey||b==C.backspace?g?(x.verbose("Removing active labels"),j&&k&&!l&&x.focusSearch(),d.last().next(G.siblingLabel).addClass(z.active),x.remove.activeLabels(d),a.preventDefault()):n&&!g&&b==C.backspace&&(x.verbose("Removing last label on input backspace"),d=c.last().addClass(z.active),x.remove.activeLabels(d)):d.removeClass(z.active)}}},keydown:function(a){var b=a.which;if(x.is.inObject(b,C)){var c,d=U.not(G.unselectable).filter("."+z.selected).eq(0),e=T.children("."+z.active).eq(0),f=d.length>0?d:e,g=f.length>0?f.siblings(":not(."+z.filtered+")").addBack():T.children(":not(."+z.filtered+")"),h=f.children(G.menu),i=f.closest(G.menu),j=i.hasClass(z.visible)||i.hasClass(z.animating)||i.parent(G.menu).length>0,k=h.length>0,l=f.length>0,m=f.not(G.unselectable).length>0,n=b==C.delimiter&&y.allowAdditions&&x.is.multiple(),o=y.allowAdditions&&y.hideAdditions&&(b==C.enter||n)&&m;if(o&&(x.verbose("Selecting item from keyboard shortcut",f),x.event.item.click.call(f,a),x.is.searchSelection()&&x.remove.searchTerm()),x.is.visible()){if((b==C.enter||n)&&(b==C.enter&&l&&k&&!y.allowCategorySelection?(x.verbose("Pressed enter on unselectable category, opening sub menu"),b=C.rightArrow):m&&(x.verbose("Selecting item from keyboard shortcut",f),x.event.item.click.call(f,a),x.is.searchSelection()&&x.remove.searchTerm()),a.preventDefault()),l&&(b==C.leftArrow&&i[0]!==T[0]&&(x.verbose("Left key pressed, closing sub-menu"),x.animate.hide(!1,i),f.removeClass(z.selected),i.closest(G.item).addClass(z.selected),a.preventDefault()),b==C.rightArrow&&k&&(x.verbose("Right key pressed, opening sub-menu"),x.animate.show(!1,h),f.removeClass(z.selected),h.find(G.item).eq(0).addClass(z.selected),a.preventDefault())),b==C.upArrow){if(c=l&&j?f.prevAll(G.item+":not("+G.unselectable+")").eq(0):U.eq(0),g.index(c)<0)return x.verbose("Up key pressed but reached top of current menu"),void a.preventDefault();x.verbose("Up key pressed, changing active item"),f.removeClass(z.selected),c.addClass(z.selected),x.set.scrollPosition(c),y.selectOnKeydown&&x.is.single()&&x.set.selectedItem(c),a.preventDefault()}if(b==C.downArrow){if(c=l&&j?c=f.nextAll(G.item+":not("+G.unselectable+")").eq(0):U.eq(0),0===c.length)return x.verbose("Down key pressed but reached bottom of current menu"),void a.preventDefault();x.verbose("Down key pressed, changing active item"),U.removeClass(z.selected),c.addClass(z.selected),x.set.scrollPosition(c),y.selectOnKeydown&&x.is.single()&&x.set.selectedItem(c),a.preventDefault()}b==C.pageUp&&(x.scrollPage("up"),a.preventDefault()),b==C.pageDown&&(x.scrollPage("down"),a.preventDefault()),b==C.escape&&(x.verbose("Escape key pressed, closing dropdown"),x.hide())}else n&&a.preventDefault(),b!=C.downArrow||x.is.visible()||(x.verbose("Down key pressed, showing dropdown"),x.show(),a.preventDefault())}else x.has.search()||x.set.selectedLetter(String.fromCharCode(b))}},trigger:{change:function(){var a=c.createEvent("HTMLEvents"),b=Q[0];b&&(x.verbose("Triggering native change event"),a.initEvent("change",!0,!1),b.dispatchEvent(a))}},determine:{selectAction:function(b,c){x.verbose("Determining action",y.action),a.isFunction(x.action[y.action])?(x.verbose("Triggering preset action",y.action,b,c),x.action[y.action].call(Y,b,c,this)):a.isFunction(y.action)?(x.verbose("Triggering user action",y.action,b,c),y.action.call(Y,b,c,this)):x.error(H.action,y.action)},eventInModule:function(b,d){var e=a(b.target),f=e.closest(c.documentElement).length>0,g=e.closest(L).length>0;return d=a.isFunction(d)?d:function(){},f&&!g?(x.verbose("Triggering event",d),d(),!0):(x.verbose("Event occurred in dropdown, canceling callback"),!1)},eventOnElement:function(b,d){var e=a(b.target),f=e.closest(G.siblingLabel),g=c.body.contains(b.target),h=0===L.find(f).length,i=0===e.closest(T).length;return d=a.isFunction(d)?d:function(){},g&&h&&i?(x.verbose("Triggering event",d),d(),!0):(x.verbose("Event occurred in dropdown menu, canceling callback"),!1)}},action:{nothing:function(){},activate:function(b,c,e){if(c=c!==d?c:b,x.can.activate(a(e))){if(x.set.selected(c,a(e)),x.is.multiple()&&!x.is.allFiltered())return;x.hideAndClear()}},select:function(b,c,e){if(c=c!==d?c:b,x.can.activate(a(e))){if(x.set.value(c,b,a(e)),x.is.multiple()&&!x.is.allFiltered())return;x.hideAndClear()}},combo:function(b,c,e){c=c!==d?c:b,x.set.selected(c,a(e)),x.hideAndClear()},hide:function(b,c,d){x.set.value(c,b,a(d)),x.hideAndClear()}},get:{id:function(){return u},defaultText:function(){return L.data(D.defaultText)},defaultValue:function(){return L.data(D.defaultValue)},placeholderText:function(){return"auto"!=y.placeholder&&"string"==typeof y.placeholder?y.placeholder:L.data(D.placeholderText)||""},text:function(){return N.text()},query:function(){return a.trim(O.val())},searchWidth:function(a){return a=a!==d?a:O.val(),P.text(a),Math.ceil(P.width()+1)},selectionCount:function(){var b=x.get.values();return x.is.multiple()?a.isArray(b)?b.length:0:""!==x.get.value()?1:0},transition:function(a){return"auto"==y.transition?x.is.upward(a)?"slide up":"slide down":y.transition},userValues:function(){var b=x.get.values();return!!b&&(b=a.isArray(b)?b:[b],a.grep(b,function(a){return!1===x.get.item(a)}))},uniqueArray:function(b){return a.grep(b,function(c,d){return a.inArray(c,b)===d})},caretPosition:function(){var a,b,d=O.get(0);return"selectionStart"in d?d.selectionStart:c.selection?(d.focus(),a=c.selection.createRange(),b=a.text.length,a.moveStart("character",-d.value.length),a.text.length-b):void 0},value:function(){var b=Q.length>0?Q.val():L.data(D.value),c=a.isArray(b)&&1===b.length&&""===b[0];return b===d||c?"":b},values:function(){var a=x.get.value();return""===a?"":!x.has.selectInput()&&x.is.multiple()?"string"==typeof a?a.split(y.delimiter):"":a},remoteValues:function(){var b=x.get.values(),c=!1;return b&&("string"==typeof b&&(b=[b]),a.each(b,function(a,b){var d=x.read.remoteData(b);x.verbose("Restoring value from session data",d,b),d&&(c||(c={}),c[b]=d)})),c},choiceText:function(b,c){if(c=c!==d?c:y.preserveHTML,b)return b.find(G.menu).length>0&&(x.verbose("Retrieving text of element with sub-menu"),b=b.clone(),b.find(G.menu).remove(),b.find(G.menuIcon).remove()),b.data(D.text)!==d?b.data(D.text):c?a.trim(b.html()):a.trim(b.text())},choiceValue:function(b,c){return c=c||x.get.choiceText(b),!!b&&(b.data(D.value)!==d?String(b.data(D.value)):"string"==typeof c?a.trim(c.toLowerCase()):String(c))},inputEvent:function(){var a=O[0];return!!a&&(a.oninput!==d?"input":a.onpropertychange!==d?"propertychange":"keyup")},selectValues:function(){var b={};return b.values=[],L.find("option").each(function(){var c=a(this),e=c.html(),f=c.attr("disabled"),g=c.attr("value")!==d?c.attr("value"):e;"auto"===y.placeholder&&""===g?b.placeholder=e:b.values.push({name:e,value:g,disabled:f})}),y.placeholder&&"auto"!==y.placeholder&&(x.debug("Setting placeholder value to",y.placeholder),b.placeholder=y.placeholder),y.sortSelect?(b.values.sort(function(a,b){return a.name>b.name?1:-1}),x.debug("Retrieved and sorted values from select",b)):x.debug("Retrieved values from select",b),b},activeItem:function(){return U.filter("."+z.active)},selectedItem:function(){var a=U.not(G.unselectable).filter("."+z.selected);return a.length>0?a:U.eq(0)},itemWithAdditions:function(a){var b=x.get.item(a),c=x.create.userChoice(a);return c&&c.length>0&&(b=b.length>0?b.add(c):c),b},item:function(b,c){var e,f,g=!1;return b=b!==d?b:x.get.values()!==d?x.get.values():x.get.text(),e=f?b.length>0:b!==d&&null!==b,f=x.is.multiple()&&a.isArray(b),c=""===b||0===b||(c||!1),e&&U.each(function(){var e=a(this),h=x.get.choiceText(e),i=x.get.choiceValue(e,h);if(null!==i&&i!==d)if(f)-1===a.inArray(String(i),b)&&-1===a.inArray(h,b)||(g=g?g.add(e):e);else if(c){if(x.verbose("Ambiguous dropdown value using strict type check",e,b),i===b||h===b)return g=e,!0}else if(String(i)==String(b)||h==b)return x.verbose("Found select item by value",i,b),g=e,!0}),g}},check:{maxSelections:function(a){return!y.maxSelections||(a=a!==d?a:x.get.selectionCount(),a>=y.maxSelections?(x.debug("Maximum selection count reached"),y.useLabels&&(U.addClass(z.filtered),x.add.message(A.maxSelections)),!0):(x.verbose("No longer at maximum selection count"),x.remove.message(),x.remove.filteredItem(),x.is.searchSelection()&&x.filterItems(),!1))}},restore:{defaults:function(){x.clear(),x.restore.defaultText(),x.restore.defaultValue()},defaultText:function(){var a=x.get.defaultText();a===x.get.placeholderText?(x.debug("Restoring default placeholder text",a),x.set.placeholderText(a)):(x.debug("Restoring default text",a),x.set.text(a))},placeholderText:function(){x.set.placeholderText()},defaultValue:function(){var a=x.get.defaultValue();a!==d&&(x.debug("Restoring default value",a),""!==a?(x.set.value(a),x.set.selected()):(x.remove.activeItem(),x.remove.selectedItem()))},labels:function(){y.allowAdditions&&(y.useLabels||(x.error(H.labels),y.useLabels=!0),x.debug("Restoring selected values"),x.create.userLabels()),x.check.maxSelections()},selected:function(){x.restore.values(),x.is.multiple()?(x.debug("Restoring previously selected values and labels"),x.restore.labels()):x.debug("Restoring previously selected values")},values:function(){x.set.initialLoad(),y.apiSettings&&y.saveRemoteData&&x.get.remoteValues()?x.restore.remoteValues():x.set.selected(),x.remove.initialLoad()},remoteValues:function(){var b=x.get.remoteValues();x.debug("Recreating selected from session data",b),b&&(x.is.single()?a.each(b,function(a,b){x.set.text(b)}):a.each(b,function(a,b){x.add.label(a,b)}))}},read:{remoteData:function(a){var c;return b.Storage===d?void x.error(H.noStorage):(c=sessionStorage.getItem(a))!==d&&c}},save:{defaults:function(){x.save.defaultText(),x.save.placeholderText(),x.save.defaultValue()},defaultValue:function(){var a=x.get.value();x.verbose("Saving default value as",a),L.data(D.defaultValue,a)},defaultText:function(){var a=x.get.text();x.verbose("Saving default text as",a),L.data(D.defaultText,a)},placeholderText:function(){var a;!1!==y.placeholder&&N.hasClass(z.placeholder)&&(a=x.get.text(),x.verbose("Saving placeholder text as",a),L.data(D.placeholderText,a))},remoteData:function(a,c){if(b.Storage===d)return void x.error(H.noStorage);x.verbose("Saving remote data to session storage",c,a),sessionStorage.setItem(c,a)}},clear:function(){x.is.multiple()&&y.useLabels?x.remove.labels():(x.remove.activeItem(),x.remove.selectedItem()),x.set.placeholderText(),x.clearValue()},clearValue:function(){x.set.value("")},scrollPage:function(a,b){var c,d,e,f=b||x.get.selectedItem(),g=f.closest(G.menu),h=g.outerHeight(),i=g.scrollTop(),j=U.eq(0).outerHeight(),k=Math.floor(h/j),l=(g.prop("scrollHeight"),"up"==a?i-j*k:i+j*k),m=U.not(G.unselectable);e="up"==a?m.index(f)-k:m.index(f)+k,c="up"==a?e>=0:e<m.length,d=c?m.eq(e):"up"==a?m.first():m.last(),d.length>0&&(x.debug("Scrolling page",a,d),f.removeClass(z.selected),d.addClass(z.selected),y.selectOnKeydown&&x.is.single()&&x.set.selectedItem(d),g.scrollTop(l))},set:{filtered:function(){var a=x.is.multiple(),b=x.is.searchSelection(),c=a&&b,d=b?x.get.query():"",e="string"==typeof d&&d.length>0,f=x.get.searchWidth(),g=""!==d;a&&e&&(x.verbose("Adjusting input width",f,y.glyphWidth),O.css("width",f)),e||c&&g?(x.verbose("Hiding placeholder text"),N.addClass(z.filtered)):(!a||c&&!g)&&(x.verbose("Showing placeholder text"),N.removeClass(z.filtered))},empty:function(){L.addClass(z.empty)},loading:function(){L.addClass(z.loading)},placeholderText:function(a){a=a||x.get.placeholderText(),x.debug("Setting placeholder text",a),x.set.text(a),N.addClass(z.placeholder)},tabbable:function(){x.is.searchSelection()?(x.debug("Added tabindex to searchable dropdown"),O.val("").attr("tabindex",0),T.attr("tabindex",-1)):(x.debug("Added tabindex to dropdown"),L.attr("tabindex")===d&&(L.attr("tabindex",0),T.attr("tabindex",-1)))},initialLoad:function(){x.verbose("Setting initial load"),q=!0},activeItem:function(a){y.allowAdditions&&a.filter(G.addition).length>0?a.addClass(z.filtered):a.addClass(z.active)},partialSearch:function(a){var b=x.get.query().length;O.val(a.substr(0,b))},scrollPosition:function(a,b){var c,e,f,g,h,i,j,k,l,m=5;a=a||x.get.selectedItem(),c=a.closest(G.menu),e=a&&a.length>0,b=b!==d&&b,a&&c.length>0&&e&&(g=a.position().top,c.addClass(z.loading),i=c.scrollTop(),h=c.offset().top,g=a.offset().top,f=i-h+g,b||(j=c.height(),l=i+j<f+m,k=f-m<i),x.debug("Scrolling to active item",f),(b||k||l)&&c.scrollTop(f),c.removeClass(z.loading))},text:function(a){"select"!==y.action&&("combo"==y.action?(x.debug("Changing combo button text",a,S),y.preserveHTML?S.html(a):S.text(a)):(a!==x.get.placeholderText()&&N.removeClass(z.placeholder),x.debug("Changing text",a,N),N.removeClass(z.filtered),y.preserveHTML?N.html(a):N.text(a)))},selectedItem:function(a){var b=x.get.choiceValue(a),c=x.get.choiceText(a,!1),d=x.get.choiceText(a,!0);x.debug("Setting user selection to item",a),x.remove.activeItem(),x.set.partialSearch(c),x.set.activeItem(a),x.set.selected(b,a),x.set.text(d)},selectedLetter:function(b){var c,d=U.filter("."+z.selected),e=d.length>0&&x.has.firstLetter(d,b),f=!1;e&&(c=d.nextAll(U).eq(0),x.has.firstLetter(c,b)&&(f=c)),f||U.each(function(){if(x.has.firstLetter(a(this),b))return f=a(this),!1}),f&&(x.verbose("Scrolling to next value with letter",b),x.set.scrollPosition(f),d.removeClass(z.selected),f.addClass(z.selected),y.selectOnKeydown&&x.is.single()&&x.set.selectedItem(f))},direction:function(a){"auto"==y.direction?(x.remove.upward(),x.can.openDownward(a)?x.remove.upward(a):x.set.upward(a),x.is.leftward(a)||x.can.openRightward(a)||x.set.leftward(a)):"upward"==y.direction&&x.set.upward(a)},upward:function(a){(a||L).addClass(z.upward)},leftward:function(a){(a||T).addClass(z.leftward)},value:function(a,b,c){var e=x.escape.value(a),f=Q.length>0,g=x.get.values(),h=a!==d?String(a):a;if(f){if(!y.allowReselection&&h==g&&(x.verbose("Skipping value update already same value",a,g),!x.is.initialLoad()))return;x.is.single()&&x.has.selectInput()&&x.can.extendSelect()&&(x.debug("Adding user option",a),x.add.optionValue(a)),x.debug("Updating input value",e,g),X=!0,Q.val(e),!1===y.fireOnInit&&x.is.initialLoad()?x.debug("Input native change event ignored on initial load"):x.trigger.change(),X=!1}else x.verbose("Storing value in metadata",e,Q),e!==g&&L.data(D.value,h);x.is.single()&&y.clearable&&(e?x.set.clearable():x.remove.clearable()),!1===y.fireOnInit&&x.is.initialLoad()?x.verbose("No callback on initial load",y.onChange):y.onChange.call(Y,a,b,c)},active:function(){L.addClass(z.active)},multiple:function(){L.addClass(z.multiple)},visible:function(){L.addClass(z.visible)},exactly:function(a,b){x.debug("Setting selected to exact values"),x.clear(),x.set.selected(a,b)},selected:function(b,c){var d=x.is.multiple();(c=y.allowAdditions?c||x.get.itemWithAdditions(b):c||x.get.item(b))&&(x.debug("Setting selected menu item to",c),x.is.multiple()&&x.remove.searchWidth(),x.is.single()?(x.remove.activeItem(),x.remove.selectedItem()):y.useLabels&&x.remove.selectedItem(),c.each(function(){var b=a(this),e=x.get.choiceText(b),f=x.get.choiceValue(b,e),g=b.hasClass(z.filtered),h=b.hasClass(z.active),i=b.hasClass(z.addition),j=d&&1==c.length;d?!h||i?(y.apiSettings&&y.saveRemoteData&&x.save.remoteData(e,f),y.useLabels?(x.add.label(f,e,j),x.add.value(f,e,b),x.set.activeItem(b),x.filterActive(),x.select.nextAvailable(c)):(x.add.value(f,e,b),x.set.text(x.add.variables(A.count)),x.set.activeItem(b))):g||(x.debug("Selected active value, removing label"),x.remove.selected(f)):(y.apiSettings&&y.saveRemoteData&&x.save.remoteData(e,f),x.set.text(e),x.set.value(f,e,b),b.addClass(z.active).addClass(z.selected))}))},clearable:function(){R.addClass(z.clear)}},add:{label:function(b,c,d){var e,f=x.is.searchSelection()?O:N,g=x.escape.value(b);if(y.ignoreCase&&(g=g.toLowerCase()),e=a("<a />").addClass(z.label).attr("data-"+D.value,g).html(I.label(g,c)),e=y.onLabelCreate.call(e,g,c),x.has.label(b))return void x.debug("User selection already exists, skipping",g);y.label.variation&&e.addClass(y.label.variation),!0===d?(x.debug("Animating in label",e),e.addClass(z.hidden).insertBefore(f).transition(y.label.transition,y.label.duration)):(x.debug("Adding selection label",e),e.insertBefore(f))},message:function(b){var c=T.children(G.message),d=y.templates.message(x.add.variables(b));c.length>0?c.html(d):c=a("<div/>").html(d).addClass(z.message).appendTo(T)},optionValue:function(b){var c=x.escape.value(b);Q.find('option[value="'+x.escape.string(c)+'"]').length>0||(x.disconnect.selectObserver(),x.is.single()&&(x.verbose("Removing previous user addition"),Q.find("option."+z.addition).remove()),a("<option/>").prop("value",c).addClass(z.addition).html(b).appendTo(Q),x.verbose("Adding user addition as an <option>",b),x.observe.select())},userSuggestion:function(a){var b,c=T.children(G.addition),d=x.get.item(a),e=d&&d.not(G.addition).length,f=c.length>0;if(!y.useLabels||!x.has.maxSelections()){if(""===a||e)return void c.remove();f?(c.data(D.value,a).data(D.text,a).attr("data-"+D.value,a).attr("data-"+D.text,a).removeClass(z.filtered),y.hideAdditions||(b=y.templates.addition(x.add.variables(A.addResult,a)),c.html(b)),x.verbose("Replacing user suggestion with new value",c)):(c=x.create.userChoice(a),c.prependTo(T),x.verbose("Adding item choice to menu corresponding with user choice addition",c)),y.hideAdditions&&!x.is.allFiltered()||c.addClass(z.selected).siblings().removeClass(z.selected),x.refreshItems()}},variables:function(a,b){var c,d,e=-1!==a.search("{count}"),f=-1!==a.search("{maxCount}"),g=-1!==a.search("{term}");return x.verbose("Adding templated variables to message",a),e&&(c=x.get.selectionCount(),a=a.replace("{count}",c)),f&&(c=x.get.selectionCount(),a=a.replace("{maxCount}",y.maxSelections)),g&&(d=b||x.get.query(),a=a.replace("{term}",d)),a},value:function(b,c,d){var e,f=x.get.values();return x.has.value(b)?void x.debug("Value already selected"):""===b?void x.debug("Cannot select blank values from multiselect"):(a.isArray(f)?(e=f.concat([b]),e=x.get.uniqueArray(e)):e=[b],x.has.selectInput()?x.can.extendSelect()&&(x.debug("Adding value to select",b,e,Q),x.add.optionValue(b)):(e=e.join(y.delimiter),x.debug("Setting hidden input to delimited value",e,Q)),!1===y.fireOnInit&&x.is.initialLoad()?x.verbose("Skipping onadd callback on initial load",y.onAdd):y.onAdd.call(Y,b,c,d),x.set.value(e,b,c,d),void x.check.maxSelections())}},remove:{active:function(){L.removeClass(z.active)},activeLabel:function(){L.find(G.label).removeClass(z.active)},empty:function(){L.removeClass(z.empty)},loading:function(){L.removeClass(z.loading)},initialLoad:function(){q=!1},upward:function(a){(a||L).removeClass(z.upward)},leftward:function(a){(a||T).removeClass(z.leftward)},visible:function(){L.removeClass(z.visible)},activeItem:function(){U.removeClass(z.active)},filteredItem:function(){y.useLabels&&x.has.maxSelections()||(y.useLabels&&x.is.multiple()?U.not("."+z.active).removeClass(z.filtered):U.removeClass(z.filtered),x.remove.empty())},optionValue:function(a){var b=x.escape.value(a),c=Q.find('option[value="'+x.escape.string(b)+'"]');c.length>0&&c.hasClass(z.addition)&&(v&&(v.disconnect(),x.verbose("Temporarily disconnecting mutation observer")),c.remove(),x.verbose("Removing user addition as an <option>",b),v&&v.observe(Q[0],{childList:!0,subtree:!0}))},message:function(){T.children(G.message).remove()},searchWidth:function(){O.css("width","")},searchTerm:function(){x.verbose("Cleared search term"),O.val(""),x.set.filtered()},userAddition:function(){U.filter(G.addition).remove()},selected:function(b,c){if(!(c=y.allowAdditions?c||x.get.itemWithAdditions(b):c||x.get.item(b)))return!1;c.each(function(){var b=a(this),c=x.get.choiceText(b),d=x.get.choiceValue(b,c);x.is.multiple()?y.useLabels?(x.remove.value(d,c,b),x.remove.label(d)):(x.remove.value(d,c,b),0===x.get.selectionCount()?x.set.placeholderText():x.set.text(x.add.variables(A.count))):x.remove.value(d,c,b),b.removeClass(z.filtered).removeClass(z.active),y.useLabels&&b.removeClass(z.selected)})},selectedItem:function(){U.removeClass(z.selected)},value:function(a,b,c){var d,e=x.get.values();x.has.selectInput()?(x.verbose("Input is <select> removing selected option",a),d=x.remove.arrayValue(a,e),x.remove.optionValue(a)):(x.verbose("Removing from delimited values",a),d=x.remove.arrayValue(a,e),d=d.join(y.delimiter)),!1===y.fireOnInit&&x.is.initialLoad()?x.verbose("No callback on initial load",y.onRemove):y.onRemove.call(Y,a,b,c),x.set.value(d,b,c),x.check.maxSelections()},arrayValue:function(b,c){return a.isArray(c)||(c=[c]),c=a.grep(c,function(a){return b!=a}),x.verbose("Removed value from delimited string",b,c),c},label:function(a,b){var c=L.find(G.label),d=c.filter("[data-"+D.value+'="'+x.escape.string(a)+'"]');x.verbose("Removing label",d),d.remove()},activeLabels:function(a){a=a||L.find(G.label).filter("."+z.active),x.verbose("Removing active label selections",a),x.remove.labels(a)},labels:function(b){b=b||L.find(G.label),x.verbose("Removing labels",b),b.each(function(){var b=a(this),c=b.data(D.value),e=c!==d?String(c):c,f=x.is.userValue(e);if(!1===y.onLabelRemove.call(b,c))return void x.debug("Label remove callback cancelled removal");x.remove.message(),f?(x.remove.value(e),x.remove.label(e)):x.remove.selected(e)})},tabbable:function(){x.is.searchSelection()?(x.debug("Searchable dropdown initialized"),O.removeAttr("tabindex"),T.removeAttr("tabindex")):(x.debug("Simple selection dropdown initialized"),L.removeAttr("tabindex"),T.removeAttr("tabindex"))},clearable:function(){R.removeClass(z.clear)}},has:{menuSearch:function(){return x.has.search()&&O.closest(T).length>0},search:function(){return O.length>0},sizer:function(){return P.length>0},selectInput:function(){return Q.is("select")},minCharacters:function(a){return!y.minCharacters||(a=a!==d?String(a):String(x.get.query()),a.length>=y.minCharacters)},firstLetter:function(a,b){var c,d;return!(!a||0===a.length||"string"!=typeof b)&&(c=x.get.choiceText(a,!1),b=b.toLowerCase(),d=String(c).charAt(0).toLowerCase(),b==d)},input:function(){return Q.length>0},items:function(){return U.length>0},menu:function(){return T.length>0},message:function(){return 0!==T.children(G.message).length},label:function(a){var b=x.escape.value(a),c=L.find(G.label);return y.ignoreCase&&(b=b.toLowerCase()),c.filter("[data-"+D.value+'="'+x.escape.string(b)+'"]').length>0},maxSelections:function(){return y.maxSelections&&x.get.selectionCount()>=y.maxSelections},allResultsFiltered:function(){var a=U.not(G.addition);return a.filter(G.unselectable).length===a.length},userSuggestion:function(){return T.children(G.addition).length>0},query:function(){return""!==x.get.query()},value:function(a){return y.ignoreCase?x.has.valueIgnoringCase(a):x.has.valueMatchingCase(a)},valueMatchingCase:function(b){var c=x.get.values();return!!(a.isArray(c)?c&&-1!==a.inArray(b,c):c==b)},valueIgnoringCase:function(b){var c=x.get.values(),d=!1;return a.isArray(c)||(c=[c]),a.each(c,function(a,c){if(String(b).toLowerCase()==String(c).toLowerCase())return d=!0,!1}),d}},is:{active:function(){return L.hasClass(z.active)},animatingInward:function(){return T.transition("is inward")},animatingOutward:function(){return T.transition("is outward")},bubbledLabelClick:function(b){return a(b.target).is("select, input")&&L.closest("label").length>0},bubbledIconClick:function(b){return a(b.target).closest(R).length>0},alreadySetup:function(){return L.is("select")&&L.parent(G.dropdown).data(K)!==d&&0===L.prev().length},animating:function(a){return a?a.transition&&a.transition("is animating"):T.transition&&T.transition("is animating")},leftward:function(a){return(a||T).hasClass(z.leftward)},disabled:function(){return L.hasClass(z.disabled)},focused:function(){return c.activeElement===L[0]},focusedOnSearch:function(){return c.activeElement===O[0]},allFiltered:function(){return(x.is.multiple()||x.has.search())&&!(0==y.hideAdditions&&x.has.userSuggestion())&&!x.has.message()&&x.has.allResultsFiltered()},hidden:function(a){return!x.is.visible(a)},initialLoad:function(){return q},inObject:function(b,c){var d=!1;return a.each(c,function(a,c){if(c==b)return d=!0,!0}),d},multiple:function(){return L.hasClass(z.multiple)},remote:function(){return y.apiSettings&&x.can.useAPI()},single:function(){return!x.is.multiple()},selectMutation:function(b){var c=!1;return a.each(b,function(b,d){if(d.target&&a(d.target).is("select"))return c=!0,!0}),c},search:function(){return L.hasClass(z.search)},searchSelection:function(){return x.has.search()&&1===O.parent(G.dropdown).length},selection:function(){return L.hasClass(z.selection)},userValue:function(b){return-1!==a.inArray(b,x.get.userValues())},upward:function(a){return(a||L).hasClass(z.upward)},visible:function(a){return a?a.hasClass(z.visible):T.hasClass(z.visible)},verticallyScrollableContext:function(){var a=M.get(0)!==b&&M.css("overflow-y");return"auto"==a||"scroll"==a},horizontallyScrollableContext:function(){var a=M.get(0)!==b&&M.css("overflow-X");return"auto"==a||"scroll"==a}},can:{activate:function(a){return!!y.useLabels||(!x.has.maxSelections()||!(!x.has.maxSelections()||!a.hasClass(z.active)))},openDownward:function(a){var c,d=a||T,e=!0,f={};return d.addClass(z.loading),c={context:{offset:M.get(0)===b?{top:0,left:0}:M.offset(),scrollTop:M.scrollTop(),height:M.outerHeight()},menu:{offset:d.offset(),height:d.outerHeight()}},x.is.verticallyScrollableContext()&&(c.menu.offset.top+=c.context.scrollTop),f={above:c.context.scrollTop<=c.menu.offset.top-c.context.offset.top-c.menu.height,below:c.context.scrollTop+c.context.height>=c.menu.offset.top-c.context.offset.top+c.menu.height},f.below?(x.verbose("Dropdown can fit in context downward",f),e=!0):f.below||f.above?(x.verbose("Dropdown cannot fit below, opening upward",f),e=!1):(x.verbose("Dropdown cannot fit in either direction, favoring downward",f),e=!0),d.removeClass(z.loading),e},openRightward:function(a){var c,d=a||T,e=!0,f=!1;return d.addClass(z.loading),c={context:{offset:M.get(0)===b?{top:0,left:0}:M.offset(),scrollLeft:M.scrollLeft(),width:M.outerWidth()},menu:{offset:d.offset(),width:d.outerWidth()}},x.is.horizontallyScrollableContext()&&(c.menu.offset.left+=c.context.scrollLeft),f=c.menu.offset.left-c.context.offset.left+c.menu.width>=c.context.scrollLeft+c.context.width,f&&(x.verbose("Dropdown cannot fit in context rightward",f),e=!1),d.removeClass(z.loading),e},click:function(){return j||"click"==y.on},extendSelect:function(){return y.allowAdditions||y.apiSettings},show:function(){return!x.is.disabled()&&(x.has.items()||x.has.message())},useAPI:function(){return a.fn.api!==d}},animate:{show:function(b,c){var e,f=c||T,g=c?function(){}:function(){x.hideSubMenus(),x.hideOthers(),x.set.active()};b=a.isFunction(b)?b:function(){},
x.verbose("Doing menu show animation",f),x.set.direction(c),e=x.get.transition(c),x.is.selection()&&x.set.scrollPosition(x.get.selectedItem(),!0),(x.is.hidden(f)||x.is.animating(f))&&("none"==e?(g(),f.transition("show"),b.call(Y)):a.fn.transition!==d&&L.transition("is supported")?f.transition({animation:e+" in",debug:y.debug,verbose:y.verbose,duration:y.duration,queue:!0,onStart:g,onComplete:function(){b.call(Y)}}):x.error(H.noTransition,e))},hide:function(b,c){var e=c||T,f=(c?y.duration:y.duration,c?function(){}:function(){x.can.click()&&x.unbind.intent(),x.remove.active()}),g=x.get.transition(c);b=a.isFunction(b)?b:function(){},(x.is.visible(e)||x.is.animating(e))&&(x.verbose("Doing menu hide animation",e),"none"==g?(f(),e.transition("hide"),b.call(Y)):a.fn.transition!==d&&L.transition("is supported")?e.transition({animation:g+" out",duration:y.duration,debug:y.debug,verbose:y.verbose,queue:!1,onStart:f,onComplete:function(){b.call(Y)}}):x.error(H.transition))}},hideAndClear:function(){x.remove.searchTerm(),x.has.maxSelections()||(x.has.search()?x.hide(function(){x.remove.filteredItem()}):x.hide())},delay:{show:function(){x.verbose("Delaying show event to ensure user intent"),clearTimeout(x.timer),x.timer=setTimeout(x.show,y.delay.show)},hide:function(){x.verbose("Delaying hide event to ensure user intent"),clearTimeout(x.timer),x.timer=setTimeout(x.hide,y.delay.hide)}},escape:{value:function(b){var c=a.isArray(b),d="string"==typeof b,e=!d&&!c,f=d&&-1!==b.search(F.quote),g=[];return e||!f?b:(x.debug("Encoding quote values for use in select",b),c?(a.each(b,function(a,b){g.push(b.replace(F.quote,"&quot;"))}),g):b.replace(F.quote,"&quot;"))},string:function(a){return a=String(a),a.replace(F.escape,"\\$&")}},setting:function(b,c){if(x.debug("Changing setting",b,c),a.isPlainObject(b))a.extend(!0,y,b);else{if(c===d)return y[b];a.isPlainObject(y[b])?a.extend(!0,y[b],c):y[b]=c}},internal:function(b,c){if(a.isPlainObject(b))a.extend(!0,x,b);else{if(c===d)return x[b];x[b]=c}},debug:function(){!y.silent&&y.debug&&(y.performance?x.performance.log(arguments):(x.debug=Function.prototype.bind.call(console.info,console,y.name+":"),x.debug.apply(console,arguments)))},verbose:function(){!y.silent&&y.verbose&&y.debug&&(y.performance?x.performance.log(arguments):(x.verbose=Function.prototype.bind.call(console.info,console,y.name+":"),x.verbose.apply(console,arguments)))},error:function(){y.silent||(x.error=Function.prototype.bind.call(console.error,console,y.name+":"),x.error.apply(console,arguments))},performance:{log:function(a){var b,c,d;y.performance&&(b=(new Date).getTime(),d=k||b,c=b-d,k=b,l.push({Name:a[0],Arguments:[].slice.call(a,1)||"",Element:Y,"Execution Time":c})),clearTimeout(x.performance.timer),x.performance.timer=setTimeout(x.performance.display,500)},display:function(){var b=y.name+":",c=0;k=!1,clearTimeout(x.performance.timer),a.each(l,function(a,b){c+=b["Execution Time"]}),b+=" "+c+"ms",i&&(b+=" '"+i+"'"),(console.group!==d||console.table!==d)&&l.length>0&&(console.groupCollapsed(b),console.table?console.table(l):a.each(l,function(a,b){console.log(b.Name+": "+b["Execution Time"]+"ms")}),console.groupEnd()),l=[]}},invoke:function(b,c,e){var g,h,i,j=Z;return c=c||o,e=Y||e,"string"==typeof b&&j!==d&&(b=b.split(/[\. ]/),g=b.length-1,a.each(b,function(c,e){var f=c!=g?e+b[c+1].charAt(0).toUpperCase()+b[c+1].slice(1):b;if(a.isPlainObject(j[f])&&c!=g)j=j[f];else{if(j[f]!==d)return h=j[f],!1;if(!a.isPlainObject(j[e])||c==g)return j[e]!==d?(h=j[e],!1):(x.error(H.method,b),!1);j=j[e]}})),a.isFunction(h)?i=h.apply(e,c):h!==d&&(i=h),a.isArray(f)?f.push(i):f!==d?f=[f,i]:i!==d&&(f=i),h}},n?(Z===d&&x.initialize(),x.invoke(m)):(Z!==d&&Z.invoke("destroy"),x.initialize())}),f!==d?f:g},a.fn.dropdown.settings={silent:!1,debug:!1,verbose:!1,performance:!0,on:"click",action:"activate",values:!1,clearable:!1,apiSettings:!1,selectOnKeydown:!0,minCharacters:0,filterRemoteData:!1,saveRemoteData:!0,throttle:200,context:b,direction:"auto",keepOnScreen:!0,match:"both",fullTextSearch:!1,placeholder:"auto",preserveHTML:!0,sortSelect:!1,forceSelection:!0,allowAdditions:!1,ignoreCase:!1,hideAdditions:!0,maxSelections:!1,useLabels:!0,delimiter:",",showOnFocus:!0,allowReselection:!1,allowTab:!0,allowCategorySelection:!1,fireOnInit:!1,transition:"auto",duration:200,glyphWidth:1.037,label:{transition:"scale",duration:200,variation:!1},delay:{hide:300,show:200,search:20,touch:50},onChange:function(a,b,c){},onAdd:function(a,b,c){},onRemove:function(a,b,c){},onLabelSelect:function(a){},onLabelCreate:function(b,c){return a(this)},onLabelRemove:function(a){return!0},onNoResults:function(a){return!0},onShow:function(){},onHide:function(){},name:"Dropdown",namespace:"dropdown",message:{addResult:"Add <b>{term}</b>",count:"{count} selected",maxSelections:"Max {maxCount} selections",noResults:"No results found.",serverError:"There was an error contacting the server"},error:{action:"You called a dropdown action that was not defined",alreadySetup:"Once a select has been initialized behaviors must be called on the created ui dropdown",labels:"Allowing user additions currently requires the use of labels.",missingMultiple:"<select> requires multiple property to be set to correctly preserve multiple values",method:"The method you called is not defined.",noAPI:"The API module is required to load resources remotely",noStorage:"Saving remote data requires session storage",noTransition:"This module requires ui transitions <https://github.com/Semantic-Org/UI-Transition>"},regExp:{escape:/[-[\]{}()*+?.,\\^$|#\s]/g,quote:/"/g},metadata:{defaultText:"defaultText",defaultValue:"defaultValue",placeholderText:"placeholder",text:"text",value:"value"},fields:{remoteValues:"results",values:"values",disabled:"disabled",name:"name",value:"value",text:"text"},keys:{backspace:8,delimiter:188,deleteKey:46,enter:13,escape:27,pageUp:33,pageDown:34,leftArrow:37,upArrow:38,rightArrow:39,downArrow:40},selector:{addition:".addition",dropdown:".ui.dropdown",hidden:".hidden",icon:"> .dropdown.icon",input:'> input[type="hidden"], > select',item:".item",label:"> .label",remove:"> .label > .delete.icon",siblingLabel:".label",menu:".menu",message:".message",menuIcon:".dropdown.icon",search:"input.search, .menu > .search > input, .menu input.search",sizer:"> input.sizer",text:"> .text:not(.icon)",unselectable:".disabled, .filtered"},className:{active:"active",addition:"addition",animating:"animating",clear:"clear",disabled:"disabled",empty:"empty",dropdown:"ui dropdown",filtered:"filtered",hidden:"hidden transition",item:"item",label:"ui label",loading:"loading",menu:"menu",message:"message",multiple:"multiple",placeholder:"default",sizer:"sizer",search:"search",selected:"selected",selection:"selection",upward:"upward",leftward:"left",visible:"visible"}},a.fn.dropdown.settings.templates={dropdown:function(b){var c=b.placeholder||!1,d=(b.values,"");return d+='<i class="dropdown icon"></i>',b.placeholder?d+='<div class="default text">'+c+"</div>":d+='<div class="text"></div>',d+='<div class="menu">',a.each(b.values,function(a,b){d+=b.disabled?'<div class="disabled item" data-value="'+b.value+'">'+b.name+"</div>":'<div class="item" data-value="'+b.value+'">'+b.name+"</div>"}),d+="</div>"},menu:function(b,c){var d=b[c.values]||{},e="";return a.each(d,function(a,b){var d=b[c.text]?'data-text="'+b[c.text]+'"':"",f=b[c.disabled]?"disabled ":"";e+='<div class="'+f+'item" data-value="'+b[c.value]+'"'+d+">",e+=b[c.name],e+="</div>"}),e},label:function(a,b){return b+'<i class="delete icon"></i>'},message:function(a){return a},addition:function(a){return a}},b=void 0!==b&&b.Math==Math?b:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),a.fn.search=function(e){var f,g=a(this),h=g.selector||"",i=(new Date).getTime(),j=[],k=arguments[0],l="string"==typeof k,m=[].slice.call(arguments,1);return a(this).each(function(){var n,o=a.isPlainObject(e)?a.extend(!0,{},a.fn.search.settings,e):a.extend({},a.fn.search.settings),p=o.className,q=o.metadata,r=o.regExp,s=o.fields,t=o.selector,u=o.error,v=o.namespace,w="."+v,x=v+"-module",y=a(this),z=y.find(t.prompt),A=y.find(t.searchButton),B=y.find(t.results),C=y.find(t.result),D=y.find(t.category),E=this,F=y.data(x),G=!1,H=!1;n={initialize:function(){n.verbose("Initializing module"),n.get.settings(),n.determine.searchFields(),n.bind.events(),n.set.type(),n.create.results(),n.instantiate()},instantiate:function(){n.verbose("Storing instance of module",n),F=n,y.data(x,n)},destroy:function(){n.verbose("Destroying instance"),y.off(w).removeData(x)},refresh:function(){n.debug("Refreshing selector cache"),z=y.find(t.prompt),A=y.find(t.searchButton),D=y.find(t.category),B=y.find(t.results),C=y.find(t.result)},refreshResults:function(){B=y.find(t.results),C=y.find(t.result)},bind:{events:function(){n.verbose("Binding events to search"),o.automatic&&(y.on(n.get.inputEvent()+w,t.prompt,n.event.input),z.attr("autocomplete","off")),y.on("focus"+w,t.prompt,n.event.focus).on("blur"+w,t.prompt,n.event.blur).on("keydown"+w,t.prompt,n.handleKeyboard).on("click"+w,t.searchButton,n.query).on("mousedown"+w,t.results,n.event.result.mousedown).on("mouseup"+w,t.results,n.event.result.mouseup).on("click"+w,t.result,n.event.result.click)}},determine:{searchFields:function(){e&&e.searchFields!==d&&(o.searchFields=e.searchFields)}},event:{input:function(){o.searchDelay?(clearTimeout(n.timer),n.timer=setTimeout(function(){n.is.focused()&&n.query()},o.searchDelay)):n.query()},focus:function(){n.set.focus(),o.searchOnFocus&&n.has.minimumCharacters()&&n.query(function(){n.can.show()&&n.showResults()})},blur:function(a){var b=c.activeElement===this,d=function(){n.cancel.query(),n.remove.focus(),n.timer=setTimeout(n.hideResults,o.hideDelay)};b||(H=!1,n.resultsClicked?(n.debug("Determining if user action caused search to close"),y.one("click.close"+w,t.results,function(a){if(n.is.inMessage(a)||G)return void z.focus();G=!1,n.is.animating()||n.is.hidden()||d()})):(n.debug("Input blurred without user action, closing results"),d()))},result:{mousedown:function(){n.resultsClicked=!0},mouseup:function(){n.resultsClicked=!1},click:function(c){n.debug("Search result selected");var d=a(this),e=d.find(t.title).eq(0),f=d.is("a[href]")?d:d.find("a[href]").eq(0),g=f.attr("href")||!1,h=f.attr("target")||!1,i=(e.html(),e.length>0&&e.text()),j=n.get.results(),k=d.data(q.result)||n.get.result(i,j);if(a.isFunction(o.onSelect)&&!1===o.onSelect.call(E,k,j))return n.debug("Custom onSelect callback cancelled default select action"),void(G=!0);n.hideResults(),i&&n.set.value(i),g&&(n.verbose("Opening search link found in result",f),"_blank"==h||c.ctrlKey?b.open(g):b.location.href=g)}}},handleKeyboard:function(a){var b,c=y.find(t.result),d=y.find(t.category),e=c.filter("."+p.active),f=c.index(e),g=c.length,h=e.length>0,i=a.which,j={backspace:8,enter:13,escape:27,upArrow:38,downArrow:40};if(i==j.escape&&(n.verbose("Escape key pressed, blurring search field"),n.hideResults(),H=!0),n.is.visible())if(i==j.enter){if(n.verbose("Enter key pressed, selecting active result"),c.filter("."+p.active).length>0)return n.event.result.click.call(c.filter("."+p.active),a),a.preventDefault(),!1}else i==j.upArrow&&h?(n.verbose("Up key pressed, changing active result"),b=f-1<0?f:f-1,d.removeClass(p.active),c.removeClass(p.active).eq(b).addClass(p.active).closest(d).addClass(p.active),a.preventDefault()):i==j.downArrow&&(n.verbose("Down key pressed, changing active result"),b=f+1>=g?f:f+1,d.removeClass(p.active),c.removeClass(p.active).eq(b).addClass(p.active).closest(d).addClass(p.active),a.preventDefault());else i==j.enter&&(n.verbose("Enter key pressed, executing query"),n.query(),n.set.buttonPressed(),z.one("keyup",n.remove.buttonFocus))},setup:{api:function(b,c){var d={debug:o.debug,on:!1,cache:o.cache,action:"search",urlData:{query:b},onSuccess:function(a){n.parse.response.call(E,a,b),c()},onFailure:function(){n.displayMessage(u.serverError),c()},onAbort:function(a){},onError:n.error};a.extend(!0,d,o.apiSettings),n.verbose("Setting up API request",d),y.api(d)}},can:{useAPI:function(){return a.fn.api!==d},show:function(){return n.is.focused()&&!n.is.visible()&&!n.is.empty()},transition:function(){return o.transition&&a.fn.transition!==d&&y.transition("is supported")}},is:{animating:function(){return B.hasClass(p.animating)},hidden:function(){return B.hasClass(p.hidden)},inMessage:function(b){if(b.target){var d=a(b.target);return a.contains(c.documentElement,b.target)&&d.closest(t.message).length>0}},empty:function(){return""===B.html()},visible:function(){return B.filter(":visible").length>0},focused:function(){return z.filter(":focus").length>0}},get:{settings:function(){a.isPlainObject(e)&&e.searchFullText&&(o.fullTextSearch=e.searchFullText,n.error(o.error.oldSearchSyntax,E))},inputEvent:function(){var a=z[0];return a!==d&&a.oninput!==d?"input":a!==d&&a.onpropertychange!==d?"propertychange":"keyup"},value:function(){return z.val()},results:function(){return y.data(q.results)},result:function(b,c){var e=["title","id"],f=!1;return b=b!==d?b:n.get.value(),c=c!==d?c:n.get.results(),"category"===o.type?(n.debug("Finding result that matches",b),a.each(c,function(c,d){if(a.isArray(d.results)&&(f=n.search.object(b,d.results,e)[0]))return!1})):(n.debug("Finding result in results object",b),f=n.search.object(b,c,e)[0]),f||!1}},select:{firstResult:function(){n.verbose("Selecting first result"),C.first().addClass(p.active)}},set:{focus:function(){y.addClass(p.focus)},loading:function(){y.addClass(p.loading)},value:function(a){n.verbose("Setting search input value",a),z.val(a)},type:function(a){a=a||o.type,"category"==o.type&&y.addClass(o.type)},buttonPressed:function(){A.addClass(p.pressed)}},remove:{loading:function(){y.removeClass(p.loading)},focus:function(){y.removeClass(p.focus)},buttonPressed:function(){A.removeClass(p.pressed)}},query:function(b){b=a.isFunction(b)?b:function(){};var c=n.get.value(),d=n.read.cache(c);b=b||function(){},n.has.minimumCharacters()?(d?(n.debug("Reading result from cache",c),n.save.results(d.results),n.addResults(d.html),n.inject.id(d.results),b()):(n.debug("Querying for",c),a.isPlainObject(o.source)||a.isArray(o.source)?(n.search.local(c),b()):n.can.useAPI()?n.search.remote(c,b):(n.error(u.source),b())),o.onSearchQuery.call(E,c)):n.hideResults()},search:{local:function(a){var b,c=n.search.object(a,o.content);n.set.loading(),n.save.results(c),n.debug("Returned full local search results",c),o.maxResults>0&&(n.debug("Using specified max results",c),c=c.slice(0,o.maxResults)),"category"==o.type&&(c=n.create.categoryResults(c)),b=n.generateResults({results:c}),n.remove.loading(),n.addResults(b),n.inject.id(c),n.write.cache(a,{html:b,results:c})},remote:function(b,c){c=a.isFunction(c)?c:function(){},y.api("is loading")&&y.api("abort"),n.setup.api(b,c),y.api("query")},object:function(b,c,e){var f=[],g=[],h=[],i=b.toString().replace(r.escape,"\\$&"),j=new RegExp(r.beginsWith+i,"i"),k=function(b,c){var d=-1==a.inArray(c,f),e=-1==a.inArray(c,h),i=-1==a.inArray(c,g);d&&e&&i&&b.push(c)};return c=c||o.source,e=e!==d?e:o.searchFields,a.isArray(e)||(e=[e]),c===d||!1===c?(n.error(u.source),[]):(a.each(e,function(d,e){a.each(c,function(a,c){"string"==typeof c[e]&&(-1!==c[e].search(j)?k(f,c):"exact"===o.fullTextSearch&&n.exactSearch(b,c[e])?k(g,c):1==o.fullTextSearch&&n.fuzzySearch(b,c[e])&&k(h,c))})}),a.merge(g,h),a.merge(f,g),f)}},exactSearch:function(a,b){return a=a.toLowerCase(),b=b.toLowerCase(),b.indexOf(a)>-1},fuzzySearch:function(a,b){var c=b.length,d=a.length;if("string"!=typeof a)return!1;if(a=a.toLowerCase(),b=b.toLowerCase(),d>c)return!1;if(d===c)return a===b;a:for(var e=0,f=0;e<d;e++){for(var g=a.charCodeAt(e);f<c;)if(b.charCodeAt(f++)===g)continue a;return!1}return!0},parse:{response:function(a,b){var c=n.generateResults(a);n.verbose("Parsing server response",a),a!==d&&b!==d&&a[s.results]!==d&&(n.addResults(c),n.inject.id(a[s.results]),n.write.cache(b,{html:c,results:a[s.results]}),n.save.results(a[s.results]))}},cancel:{query:function(){n.can.useAPI()&&y.api("abort")}},has:{minimumCharacters:function(){return n.get.value().length>=o.minCharacters},results:function(){return 0!==B.length&&""!=B.html()}},clear:{cache:function(a){var b=y.data(q.cache);a?a&&b&&b[a]&&(n.debug("Removing value from cache",a),delete b[a],y.data(q.cache,b)):(n.debug("Clearing cache",a),y.removeData(q.cache))}},read:{cache:function(a){var b=y.data(q.cache);return!!o.cache&&(n.verbose("Checking cache for generated html for query",a),"object"==typeof b&&b[a]!==d&&b[a])}},create:{categoryResults:function(b){var c={};return a.each(b,function(a,b){b.category&&(c[b.category]===d?(n.verbose("Creating new category of results",b.category),c[b.category]={name:b.category,results:[b]}):c[b.category].results.push(b))}),c},id:function(a,b){var c,e,f=a+1;return b!==d?(c=String.fromCharCode(97+b),e=c+f,n.verbose("Creating category result id",e)):(e=f,n.verbose("Creating result id",e)),e},results:function(){0===B.length&&(B=a("<div />").addClass(p.results).appendTo(y))}},inject:{result:function(a,b,c){n.verbose("Injecting result into results");var e=c!==d?B.children().eq(c).children(t.results).first().children(t.result).eq(b):B.children(t.result).eq(b);n.verbose("Injecting results metadata",e),e.data(q.result,a)},id:function(b){n.debug("Injecting unique ids into results");var c=0,e=0;return"category"===o.type?a.each(b,function(b,f){e=0,a.each(f.results,function(a,b){var g=f.results[a];g.id===d&&(g.id=n.create.id(e,c)),n.inject.result(g,e,c),e++}),c++}):a.each(b,function(a,c){var f=b[a];f.id===d&&(f.id=n.create.id(e)),n.inject.result(f,e),e++}),b}},save:{results:function(a){n.verbose("Saving current search results to metadata",a),y.data(q.results,a)}},write:{cache:function(a,b){var c=y.data(q.cache)!==d?y.data(q.cache):{};o.cache&&(n.verbose("Writing generated html to cache",a,b),c[a]=b,y.data(q.cache,c))}},addResults:function(b){if(a.isFunction(o.onResultsAdd)&&!1===o.onResultsAdd.call(B,b))return n.debug("onResultsAdd callback cancelled default action"),!1;b?(B.html(b),n.refreshResults(),o.selectFirstResult&&n.select.firstResult(),n.showResults()):n.hideResults(function(){B.empty()})},showResults:function(b){b=a.isFunction(b)?b:function(){},H||!n.is.visible()&&n.has.results()&&(n.can.transition()?(n.debug("Showing results with css animations"),B.transition({animation:o.transition+" in",debug:o.debug,verbose:o.verbose,duration:o.duration,onComplete:function(){b()},queue:!0})):(n.debug("Showing results with javascript"),B.stop().fadeIn(o.duration,o.easing)),o.onResultsOpen.call(B))},hideResults:function(b){b=a.isFunction(b)?b:function(){},n.is.visible()&&(n.can.transition()?(n.debug("Hiding results with css animations"),B.transition({animation:o.transition+" out",debug:o.debug,verbose:o.verbose,duration:o.duration,onComplete:function(){b()},queue:!0})):(n.debug("Hiding results with javascript"),B.stop().fadeOut(o.duration,o.easing)),o.onResultsClose.call(B))},generateResults:function(b){n.debug("Generating html from response",b);var c=o.templates[o.type],d=a.isPlainObject(b[s.results])&&!a.isEmptyObject(b[s.results]),e=a.isArray(b[s.results])&&b[s.results].length>0,f="";return d||e?(o.maxResults>0&&(d?"standard"==o.type&&n.error(u.maxResults):b[s.results]=b[s.results].slice(0,o.maxResults)),a.isFunction(c)?f=c(b,s):n.error(u.noTemplate,!1)):o.showNoResults&&(f=n.displayMessage(u.noResults,"empty")),o.onResults.call(E,b),f},displayMessage:function(a,b){return b=b||"standard",n.debug("Displaying message",a,b),n.addResults(o.templates.message(a,b)),o.templates.message(a,b)},setting:function(b,c){if(a.isPlainObject(b))a.extend(!0,o,b);else{if(c===d)return o[b];o[b]=c}},internal:function(b,c){if(a.isPlainObject(b))a.extend(!0,n,b);else{if(c===d)return n[b];n[b]=c}},debug:function(){!o.silent&&o.debug&&(o.performance?n.performance.log(arguments):(n.debug=Function.prototype.bind.call(console.info,console,o.name+":"),n.debug.apply(console,arguments)))},verbose:function(){!o.silent&&o.verbose&&o.debug&&(o.performance?n.performance.log(arguments):(n.verbose=Function.prototype.bind.call(console.info,console,o.name+":"),n.verbose.apply(console,arguments)))},error:function(){o.silent||(n.error=Function.prototype.bind.call(console.error,console,o.name+":"),n.error.apply(console,arguments))},performance:{log:function(a){var b,c,d;o.performance&&(b=(new Date).getTime(),d=i||b,c=b-d,i=b,j.push({Name:a[0],Arguments:[].slice.call(a,1)||"",Element:E,"Execution Time":c})),clearTimeout(n.performance.timer),n.performance.timer=setTimeout(n.performance.display,500)},display:function(){var b=o.name+":",c=0;i=!1,clearTimeout(n.performance.timer),a.each(j,function(a,b){c+=b["Execution Time"]}),b+=" "+c+"ms",h&&(b+=" '"+h+"'"),g.length>1&&(b+=" ("+g.length+")"),(console.group!==d||console.table!==d)&&j.length>0&&(console.groupCollapsed(b),console.table?console.table(j):a.each(j,function(a,b){console.log(b.Name+": "+b["Execution Time"]+"ms")}),console.groupEnd()),j=[]}},invoke:function(b,c,e){var g,h,i,j=F;return c=c||m,e=E||e,"string"==typeof b&&j!==d&&(b=b.split(/[\. ]/),g=b.length-1,a.each(b,function(c,e){var f=c!=g?e+b[c+1].charAt(0).toUpperCase()+b[c+1].slice(1):b;if(a.isPlainObject(j[f])&&c!=g)j=j[f];else{if(j[f]!==d)return h=j[f],!1;if(!a.isPlainObject(j[e])||c==g)return j[e]!==d&&(h=j[e],!1);j=j[e]}})),a.isFunction(h)?i=h.apply(e,c):h!==d&&(i=h),a.isArray(f)?f.push(i):f!==d?f=[f,i]:i!==d&&(f=i),h}},l?(F===d&&n.initialize(),n.invoke(k)):(F!==d&&F.invoke("destroy"),n.initialize())}),f!==d?f:this},a.fn.search.settings={name:"Search",namespace:"search",silent:!1,debug:!1,verbose:!1,performance:!0,type:"standard",minCharacters:1,selectFirstResult:!1,apiSettings:!1,source:!1,searchOnFocus:!0,searchFields:["title","description"],displayField:"",fullTextSearch:"exact",automatic:!0,hideDelay:0,searchDelay:200,maxResults:7,cache:!0,showNoResults:!0,transition:"scale",duration:200,easing:"easeOutExpo",onSelect:!1,onResultsAdd:!1,onSearchQuery:function(a){},onResults:function(a){},onResultsOpen:function(){},onResultsClose:function(){},className:{animating:"animating",active:"active",empty:"empty",focus:"focus",hidden:"hidden",loading:"loading",results:"results",pressed:"down"},error:{source:"Cannot search. No source used, and Semantic API module was not included",noResults:"Your search returned no results",logging:"Error in debug logging, exiting.",noEndpoint:"No search endpoint was specified",noTemplate:"A valid template name was not specified.",oldSearchSyntax:"searchFullText setting has been renamed fullTextSearch for consistency, please adjust your settings.",serverError:"There was an issue querying the server.",maxResults:"Results must be an array to use maxResults setting",method:"The method you called is not defined."},metadata:{cache:"cache",results:"results",result:"result"},regExp:{escape:/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,beginsWith:"(?:s|^)"},fields:{categories:"results",categoryName:"name",categoryResults:"results",description:"description",image:"image",price:"price",results:"results",title:"title",url:"url",action:"action",actionText:"text",actionURL:"url"},selector:{prompt:".prompt",searchButton:".search.button",results:".results",message:".results > .message",category:".category",result:".result",title:".title, .name"},templates:{escape:function(a){var b=/[&<>"'`]/g,c=/[&<>"'`]/,d={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},e=function(a){return d[a]};return c.test(a)?a.replace(b,e):a},message:function(a,b){var c="";return a!==d&&b!==d&&(c+='<div class="message '+b+'">',c+="empty"==b?'<div class="header">No Results</div class="header"><div class="description">'+a+'</div class="description">':' <div class="description">'+a+"</div>",c+="</div>"),c},category:function(b,c){var e="";a.fn.search.settings.templates.escape;return b[c.categoryResults]!==d&&(a.each(b[c.categoryResults],function(b,f){f[c.results]!==d&&f.results.length>0&&(e+='<div class="category">',f[c.categoryName]!==d&&(e+='<div class="name">'+f[c.categoryName]+"</div>"),e+='<div class="results">',a.each(f.results,function(a,b){b[c.url]?e+='<a class="result" href="'+b[c.url]+'">':e+='<a class="result">',b[c.image]!==d&&(e+='<div class="image"> <img src="'+b[c.image]+'"></div>'),e+='<div class="content">',b[c.price]!==d&&(e+='<div class="price">'+b[c.price]+"</div>"),b[c.title]!==d&&(e+='<div class="title">'+b[c.title]+"</div>"),b[c.description]!==d&&(e+='<div class="description">'+b[c.description]+"</div>"),e+="</div>",e+="</a>"}),e+="</div>",e+="</div>")}),b[c.action]&&(e+='<a href="'+b[c.action][c.actionURL]+'" class="action">'+b[c.action][c.actionText]+"</a>"),e)},standard:function(b,c){var e="";return b[c.results]!==d&&(a.each(b[c.results],function(a,b){b[c.url]?e+='<a class="result" href="'+b[c.url]+'">':e+='<a class="result">',b[c.image]!==d&&(e+='<div class="image"> <img src="'+b[c.image]+'"></div>'),e+='<div class="content">',b[c.price]!==d&&(e+='<div class="price">'+b[c.price]+"</div>"),b[c.title]!==d&&(e+='<div class="title">'+b[c.title]+"</div>"),b[c.description]!==d&&(e+='<div class="description">'+b[c.description]+"</div>"),e+="</div>",e+="</a>"}),b[c.action]&&(e+='<a href="'+b[c.action][c.actionURL]+'" class="action">'+b[c.action][c.actionText]+"</a>"),e)}}},b=void 0!==b&&b.Math==Math?b:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),a.fn.transition=function(){var e,f=a(this),g=f.selector||"",h=(new Date).getTime(),i=[],j=arguments,k=j[0],l=[].slice.call(arguments,1),m="string"==typeof k;b.requestAnimationFrame||b.mozRequestAnimationFrame||b.webkitRequestAnimationFrame||b.msRequestAnimationFrame;return f.each(function(b){var n,o,p,q,r,s,t,u,v,w=a(this),x=this;v={initialize:function(){n=v.get.settings.apply(x,j),q=n.className,p=n.error,r=n.metadata,u="."+n.namespace,t="module-"+n.namespace,o=w.data(t)||v,s=v.get.animationEndEvent(),m&&(m=v.invoke(k)),!1===m&&(v.verbose("Converted arguments into settings object",n),n.interval?v.delay(n.animate):v.animate(),v.instantiate())},instantiate:function(){v.verbose("Storing instance of module",v),o=v,w.data(t,o)},destroy:function(){v.verbose("Destroying previous module for",x),w.removeData(t)},refresh:function(){v.verbose("Refreshing display type on next animation"),delete v.displayType},forceRepaint:function(){v.verbose("Forcing element repaint");var a=w.parent(),b=w.next();0===b.length?w.detach().appendTo(a):w.detach().insertBefore(b)},repaint:function(){v.verbose("Repainting element");x.offsetWidth},delay:function(a){var c,e,g=v.get.animationDirection();g||(g=v.can.transition()?v.get.direction():"static"),a=a!==d?a:n.interval,c="auto"==n.reverse&&g==q.outward,e=c||1==n.reverse?(f.length-b)*n.interval:b*n.interval,v.debug("Delaying animation by",e),setTimeout(v.animate,e)},animate:function(a){if(n=a||n,!v.is.supported())return v.error(p.support),!1;if(v.debug("Preparing animation",n.animation),v.is.animating()){if(n.queue)return!n.allowRepeats&&v.has.direction()&&v.is.occurring()&&!0!==v.queuing?v.debug("Animation is currently occurring, preventing queueing same animation",n.animation):v.queue(n.animation),!1;if(!n.allowRepeats&&v.is.occurring())return v.debug("Animation is already occurring, will not execute repeated animation",n.animation),!1;v.debug("New animation started, completing previous early",n.animation),o.complete()}v.can.animate()?v.set.animating(n.animation):v.error(p.noAnimation,n.animation,x)},reset:function(){v.debug("Resetting animation to beginning conditions"),v.remove.animationCallbacks(),v.restore.conditions(),v.remove.animating()},queue:function(a){v.debug("Queueing animation of",a),v.queuing=!0,w.one(s+".queue"+u,function(){v.queuing=!1,v.repaint(),v.animate.apply(this,n)})},complete:function(a){v.debug("Animation complete",n.animation),v.remove.completeCallback(),v.remove.failSafe(),v.is.looping()||(v.is.outward()?(v.verbose("Animation is outward, hiding element"),v.restore.conditions(),v.hide()):v.is.inward()?(v.verbose("Animation is outward, showing element"),v.restore.conditions(),v.show()):(v.verbose("Static animation completed"),v.restore.conditions(),n.onComplete.call(x)))},force:{visible:function(){var a=w.attr("style"),b=v.get.userStyle(),c=v.get.displayType(),e=b+"display: "+c+" !important;",f=w.css("display"),g=a===d||""===a;f!==c?(v.verbose("Overriding default display to show element",c),w.attr("style",e)):g&&w.removeAttr("style")},hidden:function(){var a=w.attr("style"),b=w.css("display"),c=a===d||""===a;"none"===b||v.is.hidden()?c&&w.removeAttr("style"):(v.verbose("Overriding default display to hide element"),w.css("display","none"))}},has:{direction:function(b){var c=!1;return b=b||n.animation,"string"==typeof b&&(b=b.split(" "),a.each(b,function(a,b){b!==q.inward&&b!==q.outward||(c=!0)})),c},inlineDisplay:function(){var b=w.attr("style")||"";return a.isArray(b.match(/display.*?;/,""))}},set:{animating:function(a){var b;v.remove.completeCallback(),a=a||n.animation,b=v.get.animationClass(a),v.save.animation(b),v.force.visible(),v.remove.hidden(),v.remove.direction(),v.start.animation(b)},duration:function(a,b){b=b||n.duration,((b="number"==typeof b?b+"ms":b)||0===b)&&(v.verbose("Setting animation duration",b),w.css({"animation-duration":b}))},direction:function(a){a=a||v.get.direction(),a==q.inward?v.set.inward():v.set.outward()},looping:function(){v.debug("Transition set to loop"),w.addClass(q.looping)},hidden:function(){w.addClass(q.transition).addClass(q.hidden)},inward:function(){v.debug("Setting direction to inward"),w.removeClass(q.outward).addClass(q.inward)},outward:function(){v.debug("Setting direction to outward"),w.removeClass(q.inward).addClass(q.outward)},visible:function(){w.addClass(q.transition).addClass(q.visible)}},start:{animation:function(a){a=a||v.get.animationClass(),v.debug("Starting tween",a),w.addClass(a).one(s+".complete"+u,v.complete),n.useFailSafe&&v.add.failSafe(),v.set.duration(n.duration),n.onStart.call(x)}},save:{animation:function(a){v.cache||(v.cache={}),v.cache.animation=a},displayType:function(a){"none"!==a&&w.data(r.displayType,a)},transitionExists:function(b,c){a.fn.transition.exists[b]=c,v.verbose("Saving existence of transition",b,c)}},restore:{conditions:function(){var a=v.get.currentAnimation();a&&(w.removeClass(a),v.verbose("Removing animation class",v.cache)),v.remove.duration()}},add:{failSafe:function(){var a=v.get.duration();v.timer=setTimeout(function(){w.triggerHandler(s)},a+n.failSafeDelay),v.verbose("Adding fail safe timer",v.timer)}},remove:{animating:function(){w.removeClass(q.animating)},animationCallbacks:function(){v.remove.queueCallback(),v.remove.completeCallback()},queueCallback:function(){w.off(".queue"+u)},completeCallback:function(){w.off(".complete"+u)},display:function(){w.css("display","")},direction:function(){w.removeClass(q.inward).removeClass(q.outward)},duration:function(){w.css("animation-duration","")},failSafe:function(){v.verbose("Removing fail safe timer",v.timer),v.timer&&clearTimeout(v.timer)},hidden:function(){w.removeClass(q.hidden)},visible:function(){w.removeClass(q.visible)},looping:function(){v.debug("Transitions are no longer looping"),v.is.looping()&&(v.reset(),w.removeClass(q.looping))},transition:function(){w.removeClass(q.visible).removeClass(q.hidden)}},get:{settings:function(b,c,d){return"object"==typeof b?a.extend(!0,{},a.fn.transition.settings,b):"function"==typeof d?a.extend({},a.fn.transition.settings,{animation:b,onComplete:d,duration:c}):"string"==typeof c||"number"==typeof c?a.extend({},a.fn.transition.settings,{animation:b,duration:c}):"object"==typeof c?a.extend({},a.fn.transition.settings,c,{animation:b}):"function"==typeof c?a.extend({},a.fn.transition.settings,{animation:b,onComplete:c}):a.extend({},a.fn.transition.settings,{animation:b})},animationClass:function(a){var b=a||n.animation,c=v.can.transition()&&!v.has.direction()?v.get.direction()+" ":"";return q.animating+" "+q.transition+" "+c+b},
currentAnimation:function(){return!(!v.cache||v.cache.animation===d)&&v.cache.animation},currentDirection:function(){return v.is.inward()?q.inward:q.outward},direction:function(){return v.is.hidden()||!v.is.visible()?q.inward:q.outward},animationDirection:function(b){var c;return b=b||n.animation,"string"==typeof b&&(b=b.split(" "),a.each(b,function(a,b){b===q.inward?c=q.inward:b===q.outward&&(c=q.outward)})),c||!1},duration:function(a){return a=a||n.duration,!1===a&&(a=w.css("animation-duration")||0),"string"==typeof a?a.indexOf("ms")>-1?parseFloat(a):1e3*parseFloat(a):a},displayType:function(a){return a=a===d||a,n.displayType?n.displayType:(a&&w.data(r.displayType)===d&&v.can.transition(!0),w.data(r.displayType))},userStyle:function(a){return a=a||w.attr("style")||"",a.replace(/display.*?;/,"")},transitionExists:function(b){return a.fn.transition.exists[b]},animationStartEvent:function(){var a,b=c.createElement("div"),e={animation:"animationstart",OAnimation:"oAnimationStart",MozAnimation:"mozAnimationStart",WebkitAnimation:"webkitAnimationStart"};for(a in e)if(b.style[a]!==d)return e[a];return!1},animationEndEvent:function(){var a,b=c.createElement("div"),e={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"mozAnimationEnd",WebkitAnimation:"webkitAnimationEnd"};for(a in e)if(b.style[a]!==d)return e[a];return!1}},can:{transition:function(b){var c,e,f,g,h,i,j=n.animation,k=v.get.transitionExists(j),l=v.get.displayType(!1);if(k===d||b){if(v.verbose("Determining whether animation exists"),c=w.attr("class"),e=w.prop("tagName"),f=a("<"+e+" />").addClass(c).insertAfter(w),g=f.addClass(j).removeClass(q.inward).removeClass(q.outward).addClass(q.animating).addClass(q.transition).css("animationName"),h=f.addClass(q.inward).css("animationName"),l||(l=f.attr("class",c).removeAttr("style").removeClass(q.hidden).removeClass(q.visible).show().css("display"),v.verbose("Determining final display state",l),v.save.displayType(l)),f.remove(),g!=h)v.debug("Direction exists for animation",j),i=!0;else{if("none"==g||!g)return void v.debug("No animation defined in css",j);v.debug("Static animation found",j,l),i=!1}v.save.transitionExists(j,i)}return k!==d?k:i},animate:function(){return v.can.transition()!==d}},is:{animating:function(){return w.hasClass(q.animating)},inward:function(){return w.hasClass(q.inward)},outward:function(){return w.hasClass(q.outward)},looping:function(){return w.hasClass(q.looping)},occurring:function(a){return a=a||n.animation,a="."+a.replace(" ","."),w.filter(a).length>0},visible:function(){return w.is(":visible")},hidden:function(){return"hidden"===w.css("visibility")},supported:function(){return!1!==s}},hide:function(){v.verbose("Hiding element"),v.is.animating()&&v.reset(),x.blur(),v.remove.display(),v.remove.visible(),v.set.hidden(),v.force.hidden(),n.onHide.call(x),n.onComplete.call(x)},show:function(a){v.verbose("Showing element",a),v.remove.hidden(),v.set.visible(),v.force.visible(),n.onShow.call(x),n.onComplete.call(x)},toggle:function(){v.is.visible()?v.hide():v.show()},stop:function(){v.debug("Stopping current animation"),w.triggerHandler(s)},stopAll:function(){v.debug("Stopping all animation"),v.remove.queueCallback(),w.triggerHandler(s)},clear:{queue:function(){v.debug("Clearing animation queue"),v.remove.queueCallback()}},enable:function(){v.verbose("Starting animation"),w.removeClass(q.disabled)},disable:function(){v.debug("Stopping animation"),w.addClass(q.disabled)},setting:function(b,c){if(v.debug("Changing setting",b,c),a.isPlainObject(b))a.extend(!0,n,b);else{if(c===d)return n[b];a.isPlainObject(n[b])?a.extend(!0,n[b],c):n[b]=c}},internal:function(b,c){if(a.isPlainObject(b))a.extend(!0,v,b);else{if(c===d)return v[b];v[b]=c}},debug:function(){!n.silent&&n.debug&&(n.performance?v.performance.log(arguments):(v.debug=Function.prototype.bind.call(console.info,console,n.name+":"),v.debug.apply(console,arguments)))},verbose:function(){!n.silent&&n.verbose&&n.debug&&(n.performance?v.performance.log(arguments):(v.verbose=Function.prototype.bind.call(console.info,console,n.name+":"),v.verbose.apply(console,arguments)))},error:function(){n.silent||(v.error=Function.prototype.bind.call(console.error,console,n.name+":"),v.error.apply(console,arguments))},performance:{log:function(a){var b,c,d;n.performance&&(b=(new Date).getTime(),d=h||b,c=b-d,h=b,i.push({Name:a[0],Arguments:[].slice.call(a,1)||"",Element:x,"Execution Time":c})),clearTimeout(v.performance.timer),v.performance.timer=setTimeout(v.performance.display,500)},display:function(){var b=n.name+":",c=0;h=!1,clearTimeout(v.performance.timer),a.each(i,function(a,b){c+=b["Execution Time"]}),b+=" "+c+"ms",g&&(b+=" '"+g+"'"),f.length>1&&(b+=" ("+f.length+")"),(console.group!==d||console.table!==d)&&i.length>0&&(console.groupCollapsed(b),console.table?console.table(i):a.each(i,function(a,b){console.log(b.Name+": "+b["Execution Time"]+"ms")}),console.groupEnd()),i=[]}},invoke:function(b,c,f){var g,h,i,j=o;return c=c||l,f=x||f,"string"==typeof b&&j!==d&&(b=b.split(/[\. ]/),g=b.length-1,a.each(b,function(c,e){var f=c!=g?e+b[c+1].charAt(0).toUpperCase()+b[c+1].slice(1):b;if(a.isPlainObject(j[f])&&c!=g)j=j[f];else{if(j[f]!==d)return h=j[f],!1;if(!a.isPlainObject(j[e])||c==g)return j[e]!==d&&(h=j[e],!1);j=j[e]}})),a.isFunction(h)?i=h.apply(f,c):h!==d&&(i=h),a.isArray(e)?e.push(i):e!==d?e=[e,i]:i!==d&&(e=i),h!==d&&h}},v.initialize()}),e!==d?e:this},a.fn.transition.exists={},a.fn.transition.settings={name:"Transition",silent:!1,debug:!1,verbose:!1,performance:!0,namespace:"transition",interval:0,reverse:"auto",onStart:function(){},onComplete:function(){},onShow:function(){},onHide:function(){},useFailSafe:!0,failSafeDelay:100,allowRepeats:!1,displayType:!1,animation:"fade",duration:!1,queue:!0,metadata:{displayType:"display"},className:{animating:"animating",disabled:"disabled",hidden:"hidden",inward:"in",loading:"loading",looping:"looping",outward:"out",transition:"transition",visible:"visible"},error:{noAnimation:"Element is no longer attached to DOM. Unable to animate.  Use silent setting to surpress this warning in production.",repeated:"That animation is already occurring, cancelling repeated animation",method:"The method you called is not defined",support:"This browser does not support CSS animations"}}}(jQuery,window,document),jQuery(function(a){a(".button-next").on("click",function(){return a(".wpcm-setup-content").block({message:null,overlayCSS:{background:"#fff",opacity:.6}}),!0}),a(".ui.dropdown").dropdown(),a("#wpcm-location-picker").locationpicker({location:{latitude:Number(a(".wpcm-latitude").val()),longitude:Number(a(".wpcm-longitude").val())},radius:0,inputBinding:{latitudeInput:a(".wpcm-latitude"),longitudeInput:a(".wpcm-longitude"),locationNameInput:a(".wpcm-address")},enableAutocomplete:!0})});